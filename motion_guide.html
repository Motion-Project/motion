<h1><a name="Motion_Guide_One_Large_Document."></a>  Motion Guide </h1>
<p></p>
This version of the Guide is made for inclusion in the Motion download package for off line reading.
<p></p>
<p></p>
<a name="foswikiTOC"></a>


<ul>
<li> <a href="#Motion_Guide"> Motion Guide </a></li>
<ul>
<li> <a href="#Motion_Overview"> Overview </a></li> 
  <ul>
  <li> <a href="#What_is_Motion"> What is Motion? </a></li>
  <li> <a href="#How_do_I_get_Motion_and_what_does_it_cost"> How do I get Motion and what does it cost? </a></li>
  <li> <a href="#Maintenance_and_Support"> Maintenance and Support </a></li>
  <li> <a href="#Which_version_to_download_and_use"> Which version to download and use? </a></li>
  <li> <a href="#What_features_does_Motion_have"> What features does Motion have? </a></li>
  <li> <a href="#FreeBSD"> FreeBSD </a></li>
  <li> <a href="#MacOSX"> MacOSX </a></li>
  <li> <a href="#Documentation"> Documentation </a></li>
  <li> <a href="#Supported_Hardware"> Supported Hardware </a></li>
  </ul>
  <li> <a href="#Known_Problems"> Known Problems </a></li>
</ul>
<li> <a href="#Installation_on_Ubuntu_Debian"> Installation on Ubuntu and Debian </a></li>
<li> <a href="#Build_and_install_from_sources"> How to build Motion from the source code. </a></li> 
<ul>
  <li> <a href="#Preparation_For_Building"> Preparation For Building </a></li>
  <li> <a href="#Configure_Script"> Configure Script </a></li>
  <li> <a href="#Make"> Make </a></li> 
  <ul>
    <li> <a href="#Make_Install"> Make Install </a></li>
    <li> <a href="#Un_Install"> Un-install </a></li>
    <li> <a href="#Additional_Make_Options"> Additional Make Options </a></li>
  </ul> 
  <li> <a href="#Upgrading_From_Older_Version"> Upgrading From Older Version </a></li>
  <li> <a href="#Running_Motion"> Running Motion </a> 
</ul>

<li> <a href="#Important_Definitions"> Important Definitions </a></li>
<li> <a href="#The_Config_Files"> The Config Files </a></li>
<li> <a href="#Command_Line_Options"> Command Line Options </a></li>
<li> <a href="#Signals_Sent"> Signals (sent with e.g. kill command) </a></li>
<li> <a href="#Error_Logging"> Error Logging </a></li>
<li> <a href="#Basic_Setup"> The Basic Setup </a></li>
<li> <a href="#Configuration_Options"> Configuration Options </a></li> 
<p></p>
<p></p>
</ul>

<h2><a name="Motion_Overview"></a> Overview </h2>
<ul>
<p></p>
<h3><a name="What_is_Motion"></a>  What is Motion? </h3>
<p></p>
Motion is a program that monitors the video signal from one or more cameras and is able to detect if a significant part of the picture has changed. Or in other words, it can detect motion.
<p></p>
The program is written in C and was made for the Linux operating system.  Recent revisions have also made it available for BSD.
<p></p>
Motion is a command line based tool with only limited support for configuration via a http interface.
The many configuration options are set via the command line or configuration files.

<p></p>
The output from motion can be:
<p></p> 
<ul>
<li> jpg files</li> 
<li> ppm format files</li> 
<li> movie video sequences</li>
</ul> 
<p></p>
<h3><a name="How_do_I_get_Motion_and_what_does_it_cost"></a>  How do I get Motion and what does it cost? </h3>
<p></p>
Motion is an open source type of project. It does not cost anything. Motion is published 
under the <a href="http://www.gnu.org/licenses/gpl.html" rel="nofollow" target="_top">GNU GENERAL PUBLIC LICENSE</a> (GPL) version 2 or later. It may be a bit difficult to understand all the details of the license text (especially if your first language is not English). It means that you can get the program, install it and use it freely. You do not have to pay anything and you do not have to register anywhere or ask the author or publisher for permission. The GPL gives you both rights and some very reasonable duties when it comes to copying, distribution and modification of the program. So in very general terms you do not have to worry about licensing as a normal hobby user. If you want to use Motion in a commercial product, if you want to distribute either modified or original versions of Motion - for free or for a fee, you should read the license carefully. For more information about free software and the GPL, I encourage you to study the very interesting documents about the subject available the of the Free Software Foundation pages about the <a href="http://www.gnu.org/philosophy/philosophy.html" rel="nofollow" target="_top">Philosophy of the GNU Project</a>.
<p></p>
<h3><a name="Maintenance_and_Support"></a>  Maintenance and Support </h3>
<p></p>
Both Motion and the Motion Guide are written by people that do all this as a hobby and without asking for any payments or donations. We have a life other than developing Motion and its documentation. This means that bugfixes and updates to this guide are done as our time and families allow it. You are however encouraged to participate and contribute in a very active <a href="http://www.lavrsen.dk/twiki/bin/view/Motion/MailingList">mailing list</a>. It is a list with a very "positive attitude" and with many contributors that propose features, post patches, discuss problems and patiently answer newbie questions with a very positive spirit. Expect 1-10 emails per day.
<p></p>
To get motion direct your browser to the <a href="http://www.lavrsen.dk/twiki/bin/view/Motion/WebHome" class="foswikiCurrentWebHomeLink">Motion Homepage</a>.
<p></p>
On the <a href="http://www.lavrsen.dk/twiki/bin/view/Motion/DownloadFiles">Download Files</a> page you will find  
links to the latest stable version both as sources and binaries for some of the most popular Linux distributions. 
You will also find links to development versions. Snapshot releases are special test releases that are normally 
stable. Every day a <a href="http://www.lavrsen.dk/twiki/bin/view/Motion/MotionDailySourceSnap">Motion Daily Source Snap</a> is created from the <a href="http://www.lavrsen.dk/twiki/bin/view/Motion/MotionSubversion">Motion Subversion</a>
<p></p>
Motion was originally written by Jeroen Vreeken and later Folkert van Heusden continued as a 
lead programmer with Kenneth Lavrsen responsible for Motion Guide, website and releases on Sourceforge.
<p></p>
From version 3.1.12 Motion is now project managed entirely by Kenneth Lavrsen, and the project now shift 
towards being developed by many contributers.
<p></p>
For support we encourage you to join the mailing list instead of writing to Jeroen, Folkert or Kenneth directly. 
Newbies and stupid questions are welcome on the list. Contributions in the form of patches are also very welcome 
on the mailing list.
<p></p>
<h3><a name="Which_version_to_download_and_use"></a>  Which version to download and use? </h3>
<p></p>
Versions 3.2.12 is the current official version released in June 2010.  The trunk of the SVN represents the official 
development branch of Motion.  Additional independent development forks exist on Github that contain additional bug 
fixes, enhanced features and updated documentation.  
This guide is based upon the features and options included in the source code with which it is distributed.  
It was re-written in September 2015 to reflect the changes and options in the code at that time.
The majority of the new options and changed names represent differences between the official 3.2.12 version
and the SVN trunk and as a result this guide will generally apply to the code in the trunk as well.  There may 
however be some options and features included in this guide that are not incorporated into the trunk source code.  
Users are encouraged to evaluate the pros and cons for themselves of using any particular source.
<p></p>
Since 3.2.12 many options have been renamed in the development branches to make setting up Motion easier. 
<p></p>
Motion is included in Debian and Ubuntu while RPM users can find the binary package for 3.2.12 on the Motion Sourceforge file download page.
<p></p>
<h3><a name="What_features_does_Motion_have"></a>  What features does Motion have? </h3>
<p></p>
See more description at the <a href="http://www.lavrsen.dk/twiki/bin/view/Motion/WebHome" class="foswikiCurrentWebHomeLink">Motion Homepage</a>. 
<ul>
  <li> Taking snapshots of movement</li>
  <li> Watch multiple video devices at the same time</li>
  <li> Watch multiple inputs on one capture card at the same time</li>
  <li> Live streaming webcam </li>
  <li> Real time creation of movies using libraries from ffmpeg</li>
  <li> Take automated snapshots on regular intervals</li>
  <li> Take automated snapshots at irregular intervals using cron</li>
  <li> Executing external program when a particular event occurs</li>
  <li> Motion tracking</li>
  <li> Feed events to an MySQL, PostgreSQL or SQLite3 database.</li>
  <li> Feed video back to a video4linux loopback for real time viewing</li>
  <li> Control via simple web interface.</li>
  <li> Automatic noise and threshold control</li>
  <li> Ability to control the pan/tilt of a tracking camera.</li>
  <li> Highly configurable display of text on images.</li>
  <li> Highly configurable definition of path and file names of the stored images and movies.</li>
</ul>
<p></p>
<h3><a name="FreeBSD"></a> FreeBSD </h3>
<p></p>
Motion is originally developed for Linux and it is still mainly developed and supported for this platform.  Thanks to contributions of Angel Carpintero, Motion now builds on BSD platforms.  These platforms however have had only limited testing.  
<p></p>
<h3><a name="MacOSX"></a> MacOSX </h3>
<p></p>
Starting with Motion version 3.2.4, it is now possible to build Motion under MacOSX thanks to Angel Carpintero.  The features included are similar to BSD platforms and have had limited testing.
<p></p>
<h3><a name="Documentation"></a>  Documentation </h3>
<p></p>
You have the following sources of information:
<p></p>
<ul>
  <li> This Motion Guide</li> 
  <li> The <a href="http://www.lavrsen.dk/twiki/bin/view/Motion/FrequentlyAskedQuestions">Frequently Asked Questions</a></li>
  <li> The author of the program has written a description of the <a href="http://www.lavrsen.dk/twiki/bin/view/Motion/MotionTechnology">technology behind motion</a>.</li>
  <li> The man page. After installation simply type 'man motion' into a terminal screen.</li>
  <li> The default motion.conf file (motion-dist.conf) that comes with the package.</li>
</ul> 
<p></p>
<h3><a name="Supported_Hardware"></a>  Supported Hardware </h3>
<p></p>
Motion supports video input from two kinds of sources.
<p></p>
Standard video4linux devices (e.g. /dev/video0) and network cameras. Motion has no drivers for cameras. 
Installing or configuring the camera itself is outside the scope of this document. Generally, if the device works with 
other common video player software, it will work with Motion (and vice versa).  As a result, it is
often convenient to first get the device working with other software and then use those connection options with Motion.
<p></p>
<p></p>  
</ul>
   
<h2><a name="Known_Problems"></a>  Known Problems</a> </h2>
<ul>

<p></p>
See also the <a href="http://www.lavrsen.dk/twiki/bin/view/Motion/FrequentlyAskedQuestions">Frequently Asked Questions</a> and <a href="http://www.lavrsen.dk/twiki/bin/view/Motion/BugReports">Bug Reports</a> for known open bugs.
<p></p>
<strong>Kernel 2.6 and pwc.</strong> Note that for kernel 2.6 there is a new release of the Philips WebCam (pwc) drivers 10.0.X. It is recommended to install this. At the time of this being written the 2.6.12+ kernels have a version of pwc built-in but it is a crippled version which can only support very small picture size. You can however download the latest source code of the pwc driver (at this time 10.0.11) and build it without having to rebuild your kernel. But you will need to have either the kernel sources or a special kernel-header package installed to compile it. See <a href="http://www.lavrsen.dk/twiki/bin/viewPWC/InstallationOfPWC">Installation of PWC</a> page which is also hosted in this wiki.
<p></p>
If you use use a <strong>Logitech Quickcam Orbit or Sphere</strong> using the driver pwc/pwcx and kernel 2.6.X you should replace the file in the Motion sources called pwc-ioctl.h with the one that comes with the your pwc version. Motion is shipped with 3 versions of pwc-ioctl.h-VERSION. Rename the one that fits your major pwc version number best to pwc-ioctl.h (after renaming the current to something else). There has been some small adjustments in the API that requires that you have the right header file.
<p></p>
<p></p>

</ul> 
<h2><a name="Installation_on_Ubuntu_Debian"></a>  <strong>Installation on Ubuntu and Debian</strong> </h2>
<ul>

<p></p>
Motion is part of the Ubuntu and Debian repositories. 
<p></p>
Open up a terminal window and type:
<p></p>
<strong>sudo apt-get install motion</strong>
<p></p>
Before we start configuring Motion, we need to copy the config file to our Home folder so that the master copy won't be affected. Open a terminal and copy the configuration file to your Home folder with following commands:
<p></p>
<strong>mkdir .motion</strong>
<p></p>
(Note: This will create a hidden folder <em>.motion</em> in your Home directory.)
<p></p>
<strong>sudo cp /etc/motion/motion.conf ~/.motion/motion.conf</strong>
<p></p>
(Note: This command will copy the original motion configuration file to its location.)
<p></p>
Now can open the configuration file for editing:
<p></p>
<strong>sudo nano ~/.motion/motion.conf</strong>
<p></p>
After you you have made all the appropriate adjustments to the configuration file, close it.  
Then start motion in the terminal simply by typing:
<p></p>
<strong>motion</strong>
<p></p>
<p></p>
</ul>

<h2><a name="Build_and_install_from_sources"></a>  How to build Motion from source code</a></h2>
<ul>

<p></p>
While Motion is included in the apt packages for Ubuntu and Debian, it can also be built from the source code.  
Source code is located in multiple locations depending upon the needs of the user
<ul>
  <li>SourceForge (official release)</li>
  <li>SVN(official release and maintainer development trunk) </li>
  <li>Github(Latest fixes, enhancements and documents from community) </li>
</ul>

<p></p>
<h3><a name="Preparation_For_Building"></a>  <a Preparation For Building</a> </h3>
<ul>

<p></p>
<p></p>
In order to build Motion from source, many shared libraries must be installed.  
The particular libraries needed will vary depending upon the features desired.  
<p></p>
Note that when you install software using pre-compiled binaries (Redhat type RPMs, Debian debs etc)
you normally only get what is needed to run the programs themselves. In order to compile other programs
from source that uses these pre-compiled libraries you also need to installed the development packages. 
These are normally called the same name as the package suffixed by -devel or -dev. These development 
packages contains the header files (xxx.h) that Motion needs to build with the shared libraries. If 
you build a library from sources you already have these header files. It is recommended to simply 
install the pre-compiled binary packages and their development brothers.
<p></p>
Open a terminal and run the following commands to install the packages.
<p></p>
Ubuntu / Debian Packages
<ul>
  <li>Required</li>
  <ul>
    <p></p>
    <code><strong>sudo apt-get install autoconf automake build-essential pkgconf libtool libzip-dev libjpeg62 libjpeg62-dev</strong></code>
    <p></p>
  </ul>
  <p></p>
  <li>Optional Packages</li>
  <ul>
    <li>FFMpeg Functionality(Required for creating movies, using network cameras, etc.  SEE NOTE BELOW!)</li>
    <ul>
      <p></p>
      <code><strong>sudo apt-get install libav-tools libavformat-dev libavcodec-dev libavutil-dev libswscale-dev</strong></code>
      <p></p>
      <strong>OR    (DO NOT RUN BOTH OF THESE COMMANDS!)</strong>
      <p></p>
      <code><strong>sudo apt-get install ffmpeg libavformat-ffmpeg-dev libavcodec-ffmpeg-dev libavutil-ffmpeg-dev libswscale-ffmpeg-dev</strong></code>
      <p></p>
    </ul>
    <li>MySQL database functionality</li>
    <ul>
      <p></p>
      <code><strong>sudo apt-get install mysql-server libmysqlclient-dev</strong></code>
      <p></p>
    </ul>
    <li>PostgreSQL database functionality</li>
    <ul>
      <p></p>
      <code><strong>sudo apt-get install postgresql libpq-dev</strong></code>
      <p></p>
    </ul>
    <li>SQLite3 database functionality</li>
    <ul>
      <p></p>
      <code><strong>sudo apt-get install sqlite3</strong></code>
      <p></p>
    </ul>
    <li>JPEG Turbo</li>
    <ul>
      <p></p>
      <code><strong>sudo apt-get install libjpeg-turbo8 libjpeg-turbo8-dev</strong></code>
      <p></p>
    </ul>
    <li>SDL</li>
    <ul>
      <p></p>
      <code><strong>sudo apt-get install libsdl1.2-dev</strong></code>
      <p></p>
    </ul>
    
  </ul>
  Important ffmpeg/libav note:  Only ONE of the set of packages indicated above are needed by Motion.  The set of 
  packages and whether they are Libav or ffmpeg is a user selection and possibly dependent upon which is  
  available in the Ubuntu/Debian repositories.  The source code with the latest fixes will work with either Libav or
  ffmpeg.  Older source code may compile better using one or the other.  It is important to note that many repositories
  do NOT include both Libav and ffmpeg.  They will only have one or the other.  The default for the configure is to
  require that ffmpeg or Libav are installed.  Use the configure option to compile without the ffmpeg / libav functionality.    
</ul>
<p></p>
<p></p>
openSUSE Packages
<ul>
  <li>Required</li>
  <ul>
    <p></p>
    <code><strong>sudo zypper install autoconf automake libtool </strong></code>
    <p></p>
    <code><strong>sudo zypper install --type pattern devel_basis </strong></code>
    <p></p>
    <code><strong>sudo zypper install libjpeg8-devel </strong></code>
    <p></p>
    <code><strong>sudo zypper install -t pattern devel_C_C++ </strong></code>
    <p></p>
  </ul>
  <p></p>
  <li>Optional Packages</li>
  <ul>
    <li>FFMpeg Functionality(Required for creating movies, using network cameras, etc.  SEE NOTE BELOW!)</li>
    <ul>
      <p></p>
      <code><strong>sudo zypper ar -f -n packman-essentials http://packman.inode.at/suse/openSUSE_13.1/Essentials/ packman-essentials</strong></code>
      <p></p>
      <code><strong>sudo zypper ar -f -n packman-multimedia http://packman.inode.at/suse/openSUSE_13.1/Multimedia/ packman-multimedia</strong></code>
      <p></p>
      <code><strong>sudo zypper install libffmpeg-devel</strong></code>
      <p></p>
    </ul>
    <li>MySQL database functionality</li>
    <ul>
      <p></p>
      <code><strong>Not known by author</strong></code>
      <p></p>
    </ul>
    <li>PostgreSQL database functionality</li>
    <ul>
      <p></p>
      <code><strong>Not known by author</strong></code>
      <p></p>
    </ul>
    <li>SQLite3 database functionality</li>
    <ul>
      <p></p>
      <code><strong>Not known by author</strong></code>
      <p></p>
    </ul>
  </ul>
  Important ffmpeg note:  The ffmpeg libraries indicated above are provided by a external repository.  This may
  change in the future.  Validate that the repository is still valid when doing the install on openSUSE systems.
  The default for the configure is to require that ffmpeg or Libav are installed.  Use the configure option to 
  compile without the ffmpeg / libav functionality.
</ul> 
<p></p>
<p></p>
</ul>
<h3><a name="Configure_Script"></a>  Configure Script</a> </h3>
<ul>
Motion uses a set tools called the "autotools" in order to generate the required scripts in order to 
compile and install Motion.  The next step after gathering all of the required and desired libraries is to 
have the autotools create a configure script.  To do this open a terminal and change to the directory with 
the source code and type
<p></p>
<code><strong>autoreconf </strong></code>
<p></p>
If the 'configure' file exists and contains a valid script, the tool will return immediately since no additional work
needs to be completed.  If the script needs updating, then it will take a moment to return.  Once it has been executed, 
a file called 'configure' will exist in the directory.  Note that if the command is run as
<p></p>
<code><strong>autoreconf -f</strong></code>
<p></p>
The -f parameter instructs it to force a new configure file to be created.  This can be preferable in certain 
situations so that the configure script gets updated with the correct version number.  
Once the 'configure' file is created, we can execute it.  What the script does is interrogate the system and look
for all the needed items in order to compile Motion.  In this process it looks to determine which optional components
have been installed on the system and if found sets flags to indicate for them to be included.  If a particular library 
is required by Motion and is not found, the configure script will issue an error.  The error means that the library was 
not found because it was either not installed or that it was installed into a location that the script could not find.  
With the Motion configure script, once it has ended it also lists out all of the optional components that were located.  
Note that if you KNOW that a particular component is installed yet the configure script reports it as not installed, then
it may be necessary to use one or more of the configure options described below to tell the script where to find
the particular component.  

<p></p>
To run the configure your current directory must be the motion directory. You type
<p></p>
<code>./configure</code>
<p></p>
You can add the parameter <code>./configure --help</code> to get help on the different switches.  
<p></p>
When the configure script finishes you should validate that the options desired  
were correctly identified by the configure.  In particular, the ffmpeg option is occasionally not 
found even if it is actually installed.  Various users have indicated this to be a particular
problem with the PI.  If using a PI and have this issue, you can use the following option
<p></p>
<code>./configure --with-ffmpeg=/usr/lib/arm-linux-gnueabihf</code>
<p></p>
For a long term option, you can edit the file 
<code>$HOME/.bashrc</code>
and within it place the following two lines at the end
<code>PKG_CONFIG_PATH=/usr/lib/arm-linux-gnueabihf:$PKG_CONFIG_PATH</code>
<code>export PKG_CONFIG_PATH</code>
<p></p>
The long term option will however only become effective the next time you get into the terminal shell.
<p></p>

<table border="1" class="fixed" >
    <colgroup>    
    <col width="200px">
    <col width="500px">
    <col width="700px">
  </colgroup>
  <tbody>
  	  <tr>
       <td bgcolor="#edf4f9" word-wrap:break-word > Options</td>
       <td bgcolor="#edf4f9" word-wrap:break-word > Description <br> Defaults for the options are specified in brackets [ ]</td>
       <td bgcolor="#edf4f9" word-wrap:break-word > Editors comment </td>
     </tr>
     <tr>
       <td bgcolor="#edf4f9" word-wrap:break-word > -h, --help </td>
       <td bgcolor="#edf4f9" word-wrap:break-word > display this help and exit</td>
       <td bgcolor="#edf4f9" word-wrap:break-word > </td>       
     </tr>
     <tr>
       <td bgcolor="#edf4f9" word-wrap:break-word > --help=short</td>
       <td bgcolor="#edf4f9" word-wrap:break-word > display options specific to this package </td>
       <td bgcolor="#edf4f9" word-wrap:break-word > This command shows the options special to motion. Recommended</td>       
     </tr>
     <tr>
       <td bgcolor="#edf4f9" word-wrap:break-word > --help=recursive </td>
       <td bgcolor="#edf4f9" word-wrap:break-word > display the short help of all the included packages </td>
       <td bgcolor="#edf4f9" word-wrap:break-word > </td>       
     </tr>
     <tr>
       <td bgcolor="#edf4f9" word-wrap:break-word >-V, --version  </td>
       <td bgcolor="#edf4f9" word-wrap:break-word > display version information and exit</td>
       <td bgcolor="#edf4f9" word-wrap:break-word > Provides the version number of the source code and autotools </td>       
     </tr>
     <tr>
       <td bgcolor="#edf4f9" word-wrap:break-word > -q, --quiet, --silent </td>
       <td bgcolor="#edf4f9" word-wrap:break-word > do not print `checking...' messages </td>
       <td bgcolor="#edf4f9" word-wrap:break-word > Illustrates only the results of the script. </td>       
     </tr>
     <tr>
       <td bgcolor="#edf4f9" word-wrap:break-word > --cache-file=FILE </td>
       <td bgcolor="#edf4f9" word-wrap:break-word > cache test results in FILE. [disabled] </td>
       <td bgcolor="#edf4f9" word-wrap:break-word > No function</td>       
     </tr>
     <tr>
       <td bgcolor="#edf4f9" word-wrap:break-word > -C, --config-cach  </td>
       <td bgcolor="#edf4f9" word-wrap:break-word > alias for `--cache-file=config.cache'  </td>
       <td bgcolor="#edf4f9" word-wrap:break-word > No function </td>       
     </tr>
     <tr>
       <td bgcolor="#edf4f9" word-wrap:break-word > -n, --no-create</td>
       <td bgcolor="#edf4f9" word-wrap:break-word > do not create output files </td>
       <td bgcolor="#edf4f9" word-wrap:break-word > Used for testing if other switches produce error - without writing anything to the disk </td>       
     </tr>
     <tr>
       <td bgcolor="#edf4f9" word-wrap:break-word > --srcdir=DIR</td>
       <td bgcolor="#edf4f9" word-wrap:break-word > find the sources in DIR. [configure dir or `..'] </td>
       <td bgcolor="#edf4f9" word-wrap:break-word > DIR is a directory path. Editor recommends having the current directory being the motion installation directory and not using this switch. Then it defaults to the same directory as where the configure script is which is the current directory. </td>
     </tr>
     <tr>
       <td bgcolor="#edf4f9" word-wrap:break-word > Installation directories:</td>
       <th bgcolor="#edf4f9" word-wrap:break-word > &nbsp; </th>
       <th bgcolor="#edf4f9" word-wrap:break-word > &nbsp; </th>
     </tr>
     <tr>
       <td bgcolor="#edf4f9" word-wrap:break-word > --prefix=PREFIX </td>
       <td bgcolor="#edf4f9" word-wrap:break-word > install architecture-independent files in PREFIX <br /> [/usr/local]</td>
       <td bgcolor="#edf4f9" word-wrap:break-word > The default /usr/local means that <br><br> The executable binary "motion" is installed in /usr/local/bin <br> The manual page in /usr/local/man/man1 <br>The document files in /usr/local/docs/motion-version<br>The configuration file in /usr/local/etc <br>The example config files in /usr/local/examples/motion-version <br><br> The editor recommends keeping this default setting. <br /> If you are experimenting with many parallel versions it may be interesting to set the PREFIX to e.g. /usr/local/motion and then add /usr/local/motion/bin to your search path (or simply cd /usr/local/motion/bin before execution). <br /> This way you can change version just by changing the symbolic link in /usr/local/motion as suggested earlier in this guide. <br /> If you are installing the software on a machine where you have no access to the /usr/local but have write access to a home directory, then you should change this to point to a directory within your home tree. <br /> Example: --prefix=$HOME </td>
     </tr>
     <tr>
       <td bgcolor="#edf4f9" word-wrap:break-word > --exec-prefix=EPREFIX </td>
       <td bgcolor="#edf4f9" word-wrap:break-word > install architecture-dependent files in EPREFIX <br /> [PREFIX] </td>
       <td bgcolor="#edf4f9" word-wrap:break-word > If you set this it only defines an alternative installation directory for the executable binary. <br /> Note: The executable binary will be placed in a directory "bin" below the directory specified by this option <br /> Editor recommends leaving this as default (i.e. not setting it). </td>
     </tr>
     <tr>
       <td bgcolor="#edf4f9" word-wrap:break-word > --bindir=DIR</td>
       <td bgcolor="#edf4f9" word-wrap:break-word > user executables [EPREFIX/bin] </td>
       <td bgcolor="#edf4f9" word-wrap:break-word > With this option you can control exactly in which directory the executable binary is installed. The previous option automatically adds the bin directory. Here you are in fill control. </td>
     </tr>
     <tr>
       <td bgcolor="#edf4f9" word-wrap:break-word > --sbindir=DIR </td>
       <td bgcolor="#edf4f9" word-wrap:break-word > System admin executables [EPREFIX/sbin] </td>
       <td bgcolor="#edf4f9" word-wrap:break-word > Not used by motion. Ignore it. </td>
     </tr>
     <tr>
       <td bgcolor="#edf4f9" word-wrap:break-word > --libexecdir=DIR</td>
       <td bgcolor="#edf4f9" word-wrap:break-word > program executables [EPREFIX/libexec] </td>
       <td bgcolor="#edf4f9" word-wrap:break-word > Not used by motion. Ignore it.</td>
     </tr>
     <tr>
       <td bgcolor="#edf4f9" word-wrap:break-word > --datadir=DIR</td>
       <td bgcolor="#edf4f9" word-wrap:break-word > read-only architecture-independent data [PREFIX/share] </td>
       <td bgcolor="#edf4f9" word-wrap:break-word > Not used by motion. Ignore it.</td>
     </tr>
     <tr>
       <td bgcolor="#edf4f9" word-wrap:break-word > --sysconfdir=DIR</td>
       <td bgcolor="#edf4f9" word-wrap:break-word > read-only single-machine data [PREFIX/etc] </td>
       <td bgcolor="#edf4f9" word-wrap:break-word > 
         This is where motion both installs the default configuration file and also where it later searches for it. <br />
         Motion searches for the configuration file "motion.conf" in the following order: 
         <br /> 
         <UL>  <br /> 1. Current directory from where motion was invoked 
               <br /> 2. $HOME/.motion 
               <br /> 3. The sysconfig directory set by this switch. If not defined the default is /usr/local/etc/ <br />
         </UL> <br /> Editor recommends leaving this at default. Be careful if you run "make install" again. 
         This will overwrite the motion-dist.conf file that you may have edited. 
       </td>
     </tr>
     <tr>
       <td bgcolor="#edf4f9" word-wrap:break-word > --sharedstatedir=DIR </td>
       <td bgcolor="#edf4f9" word-wrap:break-word > modifiable architecture-independent data [PREFIX/com] </td>
       <td bgcolor="#edf4f9" word-wrap:break-word > Not used by motion. Ignore it. </td>
     </tr>
     <tr>
       <td bgcolor="#edf4f9" word-wrap:break-word > --localstatedir=DIR </td>
       <td bgcolor="#edf4f9" word-wrap:break-word > modifiable single-machine data [PREFIX/var] </td>
       <td bgcolor="#edf4f9" word-wrap:break-word > Not used by motion. Ignore it. </td>
     </tr>
     <tr>
       <td bgcolor="#edf4f9" word-wrap:break-word > --libdir=DIR </td>
       <td bgcolor="#edf4f9" word-wrap:break-word > object code libraries [EPREFIX/lib]</td>
       <td bgcolor="#edf4f9" word-wrap:break-word > Not used by motion. Ignore it. </td>
     </tr>
     <tr>
       <td bgcolor="#edf4f9" word-wrap:break-word > --includedir=DIR</td>
       <td bgcolor="#edf4f9" word-wrap:break-word > C header files [PREFIX/include] </td>
       <td bgcolor="#edf4f9" word-wrap:break-word > Not used by motion. Ignore it.</td>
     </tr>
     <tr>
       <td bgcolor="#edf4f9" word-wrap:break-word > --oldincludedir=DIR</td>
       <td bgcolor="#edf4f9" word-wrap:break-word > C header files for non-gcc [/usr/include] </td>
       <td bgcolor="#edf4f9" word-wrap:break-word > Not used by motion. Ignore it. </td>
     </tr>
     <tr>
       <td bgcolor="#edf4f9" word-wrap:break-word > --infodir=DIR </td>
       <td bgcolor="#edf4f9" word-wrap:break-word > info documentation [PREFIX/info] </td>
       <td bgcolor="#edf4f9" word-wrap:break-word > Not used by motion. Ignore it. </td>
     </tr>
     <tr>
       <td bgcolor="#edf4f9" word-wrap:break-word > --mandir=DIR</td>
       <td bgcolor="#edf4f9" word-wrap:break-word > man documentation [PREFIX/man]</td>
       <td bgcolor="#edf4f9" word-wrap:break-word > Editor recommends the default.</td>
     </tr>
	  <tr>
			<th bgcolor="#edf4f9" word-wrap:break-word > Optional Packages: </th>
			<th bgcolor="#edf4f9" word-wrap:break-word > &nbsp; </th>
			<th bgcolor="#edf4f9" word-wrap:break-word > &nbsp; </th>
		</tr>
		<tr>
			<td bgcolor="#edf4f9" word-wrap:break-word > --with-linuxthreads </td>
			<td bgcolor="#edf4f9" word-wrap:break-word > Use linuxthreads in BSD instead of native phtreads </td>
			<td bgcolor="#edf4f9" word-wrap:break-word > Only relevant for BSD. In Linux we always use this per default. </td>
		</tr>
		<tr>
			<td bgcolor="#edf4f9" word-wrap:break-word > --with-pwcbsd </td>
			<td bgcolor="#edf4f9" word-wrap:break-word > Use pwcbsd based webcams ( only BSD ) </td>
			<td bgcolor="#edf4f9" word-wrap:break-word > This option allow to build motion to support V4L/V4L2 in BSD. </td>
		</tr>
		<tr>
			<td bgcolor="#edf4f9" word-wrap:break-word > --without-bktr </td>
			<td bgcolor="#edf4f9" word-wrap:break-word > Exclude to use bktr subsystem , that usually useful for devices as network cameras </td>
			<td bgcolor="#edf4f9" word-wrap:break-word > ONLY used in *BSD </td>
		</tr>
		<tr>
			<td bgcolor="#edf4f9" word-wrap:break-word > --without-v4l </td>
			<td bgcolor="#edf4f9" word-wrap:break-word > Exclude using v4l (video4linux) subsystem. Makes Motion so it only supports network cameras. </td>
			<td bgcolor="#edf4f9" word-wrap:break-word > Can be used if you do not need support and maybe lack some of the libraries for it. </td>
		</tr>
		<tr>
			<td bgcolor="#edf4f9" word-wrap:break-word > --with-jpeg-mmx=DIR </td>
			<td bgcolor="#edf4f9" word-wrap:break-word > Specify the prefix for the install path for jpeg-mmx for optimized jpeg handling (optional). If this is not specified motion will try to find the library /usr/lib/libjpeg-mmx.a /usr/local/lib/libjpeg-mmx.a. </td>
			<td bgcolor="#edf4f9" word-wrap:break-word > Considered experimental </td>
		</tr>
		<tr>
			<td bgcolor="#edf4f9" word-wrap:break-word > --with-ffmpeg=DIR </td>
			<td bgcolor="#edf4f9" word-wrap:break-word > Specify the path for the directory prefix in which the 
			library and headers are installed  .<br /> If not specified configure will search in /usr/ and /usr/local/ </td>
			<td bgcolor="#edf4f9" word-wrap:break-word > DIR is the directory PREFIX in which the ffmpeg shared libraries 
			and their headers are installed. <br /> If you install ffmpeg from sources and use the	default directories or 
			if ffmpeg is installed as a binary package (RPM or deb) you may not need to specify the directory prefix. 
			Configure should find the libraries automatically. If you installed ffmpeg from sources and specified a 
			different --prefix when building ffmpeg you must use the same value for the DIR ( --with-ffmpeg=DIR) 
			or export that location to be included in the PKG_CONFIG_PATH
			The option of --with-ffmpeg is the default for Motion.  If the required libraries are not located, the 
			configure script will stop at the ffmpeg section and report which libraries need to be installed.  
			Once the required libraries are installed, run the script again.  As noted previously, make sure
			to install the -dev versions.   
			For more information on FFmpeg see the documentation for the FFmpeg project. <br /> </td>
		</tr>
		<tr>
			<td bgcolor="#edf4f9" word-wrap:break-word > --without-ffmpeg </td>
			<td bgcolor="#edf4f9" word-wrap:break-word > Do not compile with ffmpeg </td>
			<td bgcolor="#edf4f9" word-wrap:break-word > Use this if you do not want to compile with ffmpeg. If ffmpeg is not installed you must specify this option for Motion to build without ffmpeg. </td>
		</tr>
		<tr>
			<td bgcolor="#edf4f9" word-wrap:break-word > --with-mysql-lib=DIR </td>
			<td bgcolor="#edf4f9" word-wrap:break-word > Lib directory of MySQL </td>
			<td bgcolor="#edf4f9" word-wrap:break-word > Normally, configure will scan all possible default installation paths for MySQL libs. When its fail, use this command to tell configure where MySQL libs installation root directory is. </td>
		</tr>
		<tr>
			<td bgcolor="#edf4f9" word-wrap:break-word > --with-mysql-include=DIR </td>
			<td bgcolor="#edf4f9" word-wrap:break-word > Include directory with headers for MySQL </td>
			<td bgcolor="#edf4f9" word-wrap:break-word > Normally, configure will scan all possible default                          installation paths for MySQL include. When its fail, use this command to tell configure where MySQL include installation directory is. This is the directory with the MySQL header files. </td>
		</tr>
		<tr>
			<td bgcolor="#edf4f9" word-wrap:break-word > --without-mysql </td>
			<td bgcolor="#edf4f9" word-wrap:break-word > Do not compile with MySQL support </td>
			<td bgcolor="#edf4f9" word-wrap:break-word > Use this if you do not want to include MySQL support in the package. <br /> This can also be useful if you get compilation errors related to MySQL and you actually do not need the feature anyway. </td>
		</tr>
		<tr>
			<td bgcolor="#edf4f9" word-wrap:break-word > --with-pgsql-lib=DIR </td>
			<td bgcolor="#edf4f9" word-wrap:break-word > Normally, configure will scan all possible default installation paths for pgsql libs. When it fails, use <br /> this command to tell configure where pgsql libs installation root directory is. </td>
			<td bgcolor="#edf4f9" word-wrap:break-word > &nbsp; </td>
		</tr>      
      <tr>
			<td bgcolor="#edf4f9" word-wrap:break-word > --with-pgsql-include=DIR </td>
			<td bgcolor="#edf4f9" word-wrap:break-word > Normally, configure will scan all possible default installation paths for pgsql include. When it fails, use this command to tell configure where pgsql include installation root directory is. </td>
			<td bgcolor="#edf4f9" word-wrap:break-word > &nbsp; </td>
		</tr>
		<tr>
			<td bgcolor="#edf4f9" word-wrap:break-word > --without-pgsql </td>
			<td bgcolor="#edf4f9" word-wrap:break-word > Do not compile with PostgreSQL support </td>
			<td bgcolor="#edf4f9" word-wrap:break-word > Use this if you do not want to include PostgreSQL support in the package. <br /> This can also be useful if you get compilation errors related to PostgreSQL and you actually do not need the feature anyway. </td>
		</tr>
		<tr>
			<td bgcolor="#edf4f9" word-wrap:break-word > --without-sqlite3 </td>
			<td bgcolor="#edf4f9" word-wrap:break-word > Disable sqlite3 support in motion. </td>
			<td bgcolor="#edf4f9" word-wrap:break-word > Use this if you do not want to include SQLite3 support in the package. <br /> This can also be useful if you get compilation errors related to SQLite4 and you actually do not need the feature anyway. </td>
		</tr>
		<tr>
			<td bgcolor="#edf4f9" word-wrap:break-word > --without-optimizecpu </td>
			<td bgcolor="#edf4f9" word-wrap:break-word > Exclude autodetecting platform and cpu type. This will disable the compilation of gcc optimizing code by platform and cpu. </td>
			<td bgcolor="#edf4f9" word-wrap:break-word > Use this if the optimization causes problems. Typically if you build on some non X386 compatible CPU. </td>
		</tr>
		<tr>
			<td bgcolor="#edf4f9" word-wrap:break-word > --without-sdl </td>
			<td bgcolor="#edf4f9" word-wrap:break-word >  Compile without sdl support.</td>
			<td bgcolor="#edf4f9" word-wrap:break-word > &nbsp; </td>
		</tr>
		<tr>
			<td bgcolor="#edf4f9" word-wrap:break-word > --with-jpeg-turbo=DIR </td>
			<td bgcolor="#edf4f9" word-wrap:break-word >  Specify the prefix for the install path for jpeg-turbo for optimized jpeg handling (optional).</td>
			<td bgcolor="#edf4f9" word-wrap:break-word > &nbsp; </td>
		</tr>
		<tr>
			<td bgcolor="#edf4f9" word-wrap:break-word > --with-developer-flags </td>
			<td bgcolor="#edf4f9" word-wrap:break-word > Add additional warning flags for the compiler. </td>
			<td bgcolor="#edf4f9" word-wrap:break-word > This option is for developers only. It produces a flood of warnings that helps the developer to write more robust code. These warnings are normally harmless but can sometimes be a latent defect. </td>
		</tr>      		
	</tbody>
</table>
<p></p>
<p></p>
</ul>
<h3><a name="Make"></a>  Make </h3>
<ul>

Once the configure script has successfully finished and indicates all options desired, a 'makefile' is created.  
The makefile builds the Motion program and links in all of the required libraries.  To run the makefile, type
<p></p>
<code>make</code>
<p></p>
The makefile will go through each of the files and compile it.  Depending upon the source code obtained, there may be many 
warnings or possibly none.  
<p></p>
If the notifications indicate many many undefined references, then it is most likely that
an additional library needs to be added in via the configure switches.  Many of these additional libraries are related
to the version of ffmpeg and how it was built or installed.  The following is a sample of some of the extra libraries 
that may need to be added.
<p></p>
<code>
-lavformat -lswscale -lavcodec -lavutil -lfdk-aac -lswresample -lm -lopus -lz -lva -lvpx -lx264 -lmp3lame -lbz2 -ldl -lvorbisenc -lvorbis -ltheoraenc -ltheoradec 
</code>
<p></p>  
    
<p></p>
Once the makefile has completed correctly, it will report 'build complete'.
<p></p>
<strong>ALERT!</strong>
<p></p>
If you have run <code>make</code> before, you should run a <code>make clean</code> before 
running <code>make</code> again. This cleans out all the object files that were 
generated the previous time you ran <code>make</code>. If you do not run <code>make clean</code> first 
before you rebuild Motion you may not get the additional feature included. 
For example: If you built Motion without ffmpeg support and then add it later and rebuild Motion 
without running <code>make clean</code> first the ffmpeg feature does not get compiled into the Motion binary.
<p></p>
First time you build motion run <code>./configure</code>, <code>make</code>, <code>make install</code>. 
If you need to build it again (to run with different configure options) run <code>./configure</code>, 
<code>make clean</code>, <code>make</code>, <code>make install</code>.
<p></p>
<h3><a name="Make_Install"></a>  Make Install </h3>
<code>make install</code> copies and installs all the files that were generated during the compilation/linking 
that <code>make</code> did.
<p></p>
Creates the directories (if they do not already exist)(path shown are the defaults):
<ul>
<li>/usr/local/bin</li>
<li>usr/local/man/man1</li>
<li>/usr/local/etc</li>
<li>/usr/local/share/doc/motion-<code>version</code></li>
<li>/usr/local/share/doc/examples/motion-<code>version</code></li>
</ul>
<p></p>

Copies the following files from the base motion directory 
(assuming the default PREFIX /usr/local was used when running configure.  Otherwise adjust to the actuals you chose) 
<ul>
  <li> Executable binary "motion" to /usr/local/bin</li>
  <li> Manual page "motion.1" to /usr/local/man/man1</li>
  <li> Document files "CHANGELOG, COPYING, CREDITS, INSTALL, and README to /usr/local/share/doc/motion-<code>version</code></li>
  <li> Example configuration files "*.conf" to /usr/local/share/doc/examples/motion-<code>version</code></li>
  <li> Configuration file "motion-dist.conf" to /usr/local/etc</li>
</ul> 

Note that the any existing files are overwritten. The default config file motion-dist.conf is named like 
this so that you do not get your working motion.conf file overwritten when you upgrade Motion.

<p></p>
<h3><a name="Un_Install"></a>  Un-install </h3>
From the motion base installation directory you simply run <code>make uninstall</code>
<p></p>
And delete the base installation directory in /usr/local and any link pointing to it. If you have forgotten where you installed it or someone else did it for you, simply search for the files and directories starting with motion. If the filenames and the directories match the names described in the "Make Install" section of this document, you can safely delete them.
<p></p>
<h3><a name="Additional_Make_Options"></a>  Additional Make Options </h3>
The make command can be run with several options. <code>make</code>, <code>make install</code> and <code>make uninstall</code> has already been described above.
<p></p> 
<dl>
  <dt> <strong>make clean</strong> </dt>
  <dd> deletes all the binary files (object files) and the motion binary generated by make. It also deletes temporary files and any jpg files that motion has saved in the motion source directory. It is very important to always run <code>make clean</code> before you run <code>make</code> if you change the configuration (like adding features such as ffmpeg) and rebuild motion.</dd>
</dl> 
<p></p>
 <dl>
  <dt> <strong>make distclean</strong> </dt>
  <dd> deletes the files: config.status, config.log, config.cache, Makefile, and motion.spec.</dd>
</dl> 
<p></p>
<dl>
  <dt> <strong>make updateguide</strong> </dt>
  <dd> fetches the copy of this guide from the web page and puts it in your motion source directory. Note that the pictures are not downloaded.</dd>
</dl> 
<p></p>
<dl>
  <dt> <strong>make dist</strong> </dt>
  <dd> performs make clean, make distclean and make updateguide in one single operation.</dd>
</dl>
 
<p></p>
<p></p>

</ul>
<h3><a name="Upgrading_From_Older_Version"></a>  Upgrading From Older Version </h3>
<ul>
 If you are upgrading from an older version of Motion you should note that many many options have been rename, added or removed.
 The author recommends that you start by copying the configuration files from the older version to a safe location for reference only.
 Then start with a clean copy of the new motion-dist.conf installed and make changes to it.  
<p></p>
<p></p>
</ul>
<h3><a name="Running_Motion"></a> Running Motion </h3>
<ul>

<p></p>
<p></p>
</ul>

</ul>

<h2><a name="Important_Definitions"></a>  Important Definitions </h2>
<ul>

<p></p>
Motion is invoked from the command line. It has no GUI. Everything is controlled from config files. 
From version 3.2 the command line is only used to define location of config file and a few special 
options. 
<p></p>
A few important definitions. 
<ul>
  <li> A snapshot is a picture taken at regular intervals independently of any movement in the picture.</li>
  <li> A "motion" image/mpeg shows the pixels that have actually changed during the last frames. These pictures are not very useful for normal presentation to the public but they are quite useful for testing and tuning and making mask files as you can see exactly where motion sees something moving. Motion is shown in greytones. If labelling is enabled the largest area is marked as blue. Smart mask is shown in red.</li>
  <li> A "normal" image is the real image taken by the camera with text overlayed.</li>
</ul>
 
<p></p>
<p></p>
</ul>

<h2><a name="ConfigFiles"></a> <a name="The_Config_Files"></a>  The Configuration Files </h2>
<ul>

<p></p>
If Motion was invoked with command line option <code>-c pathname</code> Motion will expect the config file to be as specified. When you specify the config file on the command line with -c you can call it anything.
<p></p>
If you do not specify -c or the filename you give Motion does not exist, Motion will search for the configuration file called 'motion.conf' in the following order:
<p></p> 
<ol>
  <li> Current directory from where motion was invoked</li>
  <li> Then in a directory called '.motion' in the current users home directory (shell environment variable $HOME). E.g. /home/goofy/.motion/motion.conf</li>
  <li> The directory defined by the --sysconfdir=DIR when running .configure during installation of Motion<br />(If this option was not defined the default is /usr/local/etc/motion)</li>
</ol> 

If you have write access to /usr/local/etc/motion then the editor recommends having only one motion.conf file 
in the default /usr/local/etc/motion directory.
<p></p>
Motion has a configuration file in the distribution package called motion-dist.conf. When you run 'make install' this 
file gets copied to the /usr/local/etc/motion directory.
<p></p>
The configuration file needs to be renamed from motion-dist.conf to motion.conf. The original file is called motion-dist.conf so that your perfectly working motion.conf file does not accidentally get overwritten when you re-install or upgrade to a newer version of Motion.
<p></p>
If you have more than one camera you should not try and invoke Motion more times. Motion is made to work with more than one camera in a very elegant way and the way to do it is to create a number of thread config files. Motion will then create an extra thread of itself for each camera. If you only have one camera you only need the motion.conf file. The minute you have two or more cameras you must have <strong>one thread config file per camera</strong> besides the motion.conf file.
<p></p>
So if you have for example two cameras you need motion.conf <strong>and two</strong> thread config files. Total of <strong>3</strong> config files.
<p></p>
An option that is common to all cameras can be placed in motion.conf. (You can also put all parameters in the thread files but that makes a lot of editing when you change a common thing).
<p></p>
An option that is unique to a camera must be defined in each thread file.
<p></p>
<em>It is often seen that people copy the entire motion.conf into the thread config files and change a few options. This works but it not recommended because it is more difficult to maintain and overview. Keep all the common options in motion.conf and the few unique only in the thread config files</em>
<p></p>
The first camera is defined in the first thread file called from motion.conf. The 2nd camera is defined in the 2nd thread file called from motion.conf etc.
<p></p>
Any option defined in motion.conf will be used for all cameras except for the cameras in which the same option is defined in a thread config file.
<p></p>
To make it clear, the thread files format and syntax is the same as motion.conf. An example of what you might want in a thread file as follows: assume you have two cameras, attached to one system. Create files thread0.conf and thread1.conf. At the end of motion.conf, uncomment out the lines that refer to them. The full contents of the thread files can be as simple as
<p></p>

<p></p>
thread0.conf:<p></p> videodevice /dev/video0<p></p> stream_port 8081
<p></p>
<p></p>
<p></p>
thread1.conf:<p></p> videodevice /dev/video1<p></p> stream_port 8082
<p></p>
<p></p>
<p></p>
Motion reads its configuration parameters in the following sequence. If the same 
parameter exists more than one place <strong>the last one read wins</strong> 


<ol>
  <li> Motion reads the configuration file motion.conf from the beginning of the file going down line by line.</li>
  <li> If the option "thread" is defined in motion.conf, the thread configuration file(s) is/(are) read.</li>
  <li> Motion continues reading the rest of the motion.conf file. Any options from here will overrule the same option previously defines in a thread config file.</li>
  <li> Motion reads the command line option again overruling any previously defined options.</li>
</ol> 
So always call the thread config files in the end of the motion.conf file. If you define options in motion.conf  AFTER the thread file calls, the same options in the thread files will never be used. So always put the thread file call at the end of motion.conf.
<p></p>
Nearly all config options can be unique for a specific camera and placed in a thread config file. 
There are a few options that must be in motion.conf and cannot be in a thread config 
file: stream_auth_method, webcontrol_* , daemon, and thread.
<p></p>
If motion is built without specific features such as ffmpeg, mysql etc it will ignore the options that belongs to these features. 
<p></p>
If you run the http control command <a href="http://host:port/0/config/writeyes" rel="nofollow" target="_top">http://host:port/0/config/writeyes</a>, motion will overwrite motion.conf and all the thread.conf files by autogenerated config files neatly formatted and only with the features included that Motion was built with. If you later re-build Motion with more features or upgrade to a new version, you can use your old config files, run the motion.conf.write command, and you will have new config files with the new options included all set to their default values. This makes upgrading very easy to do.

<p></p>
<p></p>
</ul>

<h2><a name="Command_Line_Options"></a>  Command Line Options </h2>
<ul>

<p></p>
SYNOPSIS
<pre>
motion [ -hbnsm ] [ -c config file path ] [ -d level ] [ -k level ] [ -p process_id_file ] [ -l log_file ]
</pre>
<p></p>
<ul>
  <li>-c : Full path and filename of config file.</li> 
  <li>-h : Show help screen</li>
  <li>-b : Run in daemon mode</li>
  <li>-n : Run in non-daemon mode</li>
  <li>-s : Run in setup mode. Also forces non-daemon mode.</li> 
  <li>-d : Run with message log level 1 - 9</li>
  <li>-k : Run with message log type 1 - 9</li>
  <li>-l : Full path and file name for log file</li>
  <li>-p : Full path and file name for the process id file</li>  
  <li>-m : Start in pause mode</li>
</ul>
<p></p>
<p></p>
</ul>

<h2><a name="Signals_Sent"></a>  Signals (sent with e.g. kill command) </h2>
<ul>
<p></p>
A signal can be sent from the command line by typing e.g. <code>kill -s SIGHUP pid</code>, where the last parameter is the process ID which you get by typing <code>ps -ef &brvbar; grep motion</code>. The PID is the first on the list which is the parent process for the threads.
Motion responds to the following signals:
<p></p>
<table border="1" class="fixed" >
    <colgroup>    
    <col width="250px">
    <col width="250px">
    <col width="250px">
  </colgroup>
  <thead>
  		<tr>
			<th bgcolor="#edf4f9" word-wrap:break-word > Signal </th>
			<th bgcolor="#edf4f9" word-wrap:break-word > Description </th>
			<th bgcolor="#edf4f9" word-wrap:break-word > Editors comment </th>
		</tr>
	</thead>
	<tbody>
		<tr>
			<td bgcolor="#edf4f9" word-wrap:break-word > SIGHUP </td>
			<td bgcolor="#edf4f9" word-wrap:break-word > The config file will be reread. </td>
			<td bgcolor="#edf4f9" word-wrap:break-word > This is a very useful signal when you experiment with settings in the config file. </td>
		</tr>
		<tr>
			<td bgcolor="#edf4f9" word-wrap:break-word > SIGTERM </td>
			<td bgcolor="#edf4f9" word-wrap:break-word > If needed motion will create an movie file of the last event and exit </td>
			<td bgcolor="#edf4f9" word-wrap:break-word > &nbsp; </td>
		</tr>
		<tr>
			<td bgcolor="#edf4f9" word-wrap:break-word > SIGUSR1 </td>
			<td bgcolor="#edf4f9" word-wrap:break-word > Motion will create an movie file of the current event. </td>
			<td bgcolor="#edf4f9" word-wrap:break-word > &nbsp; </td>
		</tr>
	</tbody>
</table>

<p></p>
<p></p>
</ul>

<h2><a name="Error_Logging"></a>  Error Logging </h2>
<ul>

<p></p>
Motion reports errors to the console when it runs in non-daemon mode. And it outputs 
even more information when run in setup mode.
<p></p>
Error logging has been implemented so that errors during daemon (background) mode are logged in the syslog or to the user
specified log file.
<p></p>
The log is in most Linux systems the file <code>/var/log/messages</code> (e.g. RedHat/Fedora) 
or <code>/var/log/syslog</code> and <code>/var/log/user.log</code> (e.g. Debian).
<p></p>
<p></p>
</ul>

<h2><a name="Basic_Setup"></a>  Basic Setup </h2>
<ul>
<p></p>

Before you can start using Motion you need to know some basics about your camera.
Either you have a camera connected directly to your computer. In this case it is a video4linux type of camera. 
Or you connect to a network camera using a normal web URL.
<p></p>
For video4linux devices, the camera must be installed per the requirements of the camera.  It is 
out of the scope of this document to tell you how to do this and it depends on which type of camera.  Once 
the camera is installed it will have the device name(s) of /dev/video0, /dev/video1, /dev/video2...
<p></p>
FreeBSD has a different naming of devices. When you build Motion for FreeBSD the default device name is /dev/bktr0. 
Under FreeBSD a TV card has a special device for controlling the tuner (e.g. /dev/tuner0). The option tunerdevice 
is only valid when Motion is built and running under FreeBSD. For Linux do not include this option in the config 
file (remove or comment out). 
<p></p>
<strong>USB cameras</strong> take a lot of bandwidth. A USB camera connected to a USB 2 port or hub consumes virtually 
all the bandwidth that the port can handle. Even with a small framesize and low framerate you should not expect to have
more than one camera per USB controller. If you need more than 1 USB camera it is possible to add extra USB PCI cards 
to your computer.  It is also possible that your computer has more than one controller for different USB slots.  For
example, if the computer has six USB ports, the three on the left may be on controller A versus the three on the right 
may be on controller B.  In this situation, connecting two cameras to ports only on the left would not work due to 
excessive bandwidth.  However connecting one camera to port on the right and the other to the port on the left
may work since they are on different controllers.  

Motion permits the use of video cards that have discreet input channels.  Since USB cameras do not have input channels, 
the option <code>input</code> must be set to the value -1 for USB cameras.
<p></p>

<strong>Network cameras</strong> are set up via the netcam_url parameter.  The latest versions of Motion support
rtsp format which many cameras now stream.  The URL connection string to enter is specific to the camera and is 
usually provided by the manufacturer.  The connection string is the same as what would be used by other 
video playing software such as VLC.  If the camera does not stream via RTSP and instead uses a MJPEG, then Motion
can also view that format.  See the option <code>netcam_url</code> for additional options.  
 
<p></p>
<strong>Composite video cards</strong> are normally made with a chip called BT878 (older cards have a BT848). They 
all use the Linux driver called 'bttv'.
<p></p>
There are cards with more then one video input but still only one BT878 chip. They have a video multiplexer which 
input is selected with the config option <code>input</code>. Input channel numbers start at 0 
(which is why the value -1 and not 0 disables input selection). There are video capture cards available 
with 4 or 8 inputs but only one chip. They present themselves as one single video device and 
you select input using the 'input' option. If you define e.g. 4 thread config files with the 
same videodevice name but different input numbers Motion automatically 
goes into round robin mode. 
<p></p>
Many TV tuner cards have the input channels: TV Tuner = 0, Standard composite video = 1, S-VHS = 3. 
Others have TV=0, composite video 1= 1, composite video = 2,  S-VHS = 3. 
For video capture cards input 1 is normally the composite video input.
<p></p>
Some capture cards are specially made for surveillance with for example 4 inputs. 
Others have a TV tuner, a composite input (phono socket) and perhaps also a S-VHS input. 
For all these cards the inputs are numbered. The numbering varies from card to card so the easiest 
is to experiment for 5 minutes with a program that can show the videostream. 
Use a program such as Camstream, xawtv or VLC to experiment with the values.
<p></p>
If you use the TV tuner input you also need to set the frequency of the TV channel using the 
option <code>frequency</code>. Otherwise set <code>frequency</code> to 0.
<p></p>
Finally you need to set the TV norm. Values: 0 (PAL), 1 (NTSC), 2 (SECAM), 3 (PAL NC no colour). Default is 0 (PAL). 
If your camera is a PAL black and white you may get a better result with norm=3 (PAL no colour).
<p></p>
<p></p>
</ul>

<h2><a name="Configuration_Options"></a>  Configuration Options</a> </h2>
<ul>


<p></p>
These are the options that can be used in the config file.
<p></p>
All number values are integer numbers (no decimals allowed). Boolean options can be on or off.
<p></p>
Some configuration options are only used if Motion is built on a system that has the matching software libraries installed (MySQL, PostgreSQL, SQLite, FFMPEG, etc).
<p></p>
<p></p>

<a href="#Options_System_Processing" >System Processing</a>
<ul>

<table border="1" class="fixed" >
    <colgroup>    
    <col width="250px">
    <col width="250px">
    <col width="250px">
    <col width="250px">
  </colgroup>
  <tbody>
  	  <tr>
       <td bgcolor="#edf4f9" ><a href="#daemon" >daemon</a> </td>
       <td bgcolor="#edf4f9" ><a href="#process_id_file" >process_id_file</a> </td>
       <td bgcolor="#edf4f9" ><a href="#setup_mode" >setup_mode</a> </td>
       <td bgcolor="#edf4f9" ><a href="#logfile" >logfile</a> </td>
     </tr>
     <tr>
       <td bgcolor="#edf4f9" ><a href="#log_level" >log_level</a> </td>
       <td bgcolor="#edf4f9" ><a href="#log_type" >log_type</a> </td>
       <td bgcolor="#edf4f9" ><a href="#sdl_threadnr" >sdl_threadnr</a> </td>
       <td bgcolor="#edf4f9" ><a href="#thread" >thread</a> </td>
     </tr>
   </tbody>  
</table>

<p></p>
<p></p>
<p></p>
</ul>

<a href="#Options_Video4Linux_Devices" >Video4Linux Devices</a>
<ul>

<table border="1" class="fixed" >
  <colgroup>    
    <col width="250px">
    <col width="250px">
    <col width="250px">
    <col width="250px">
  </colgroup>
    <tbody>
  	  <tr>
       <td bgcolor="#edf4f9" ><a href="#videodevice" >videodevice</a> </td>
       <td bgcolor="#edf4f9" ><a href="#v4l2_palette" >v4l2_palette</a> </td>
       <td bgcolor="#edf4f9" ><a href="#tunerdevice" >tunerdevice</a> </td>
       <td bgcolor="#edf4f9" ><a href="#input" >input</a> </td>
     </tr>
     <tr>
       <td bgcolor="#edf4f9" ><a href="#norm" >norm</a> </td>
       <td bgcolor="#edf4f9" ><a href="#frequency" >#frequency</a> </td>
       <td bgcolor="#edf4f9" ><a href="#power_line_frequency" >power_line_frequency</a> </td>
       <td bgcolor="#edf4f9" ><a href="#auto_brightness" >auto_brightness</a> </td>       
     </tr>
     <tr>
       <td bgcolor="#edf4f9" ><a href="#brightness" >brightness</a> </td>
       <td bgcolor="#edf4f9" ><a href="#contrast" >contrast</a> </td>
       <td bgcolor="#edf4f9" ><a href="#saturation" >saturation</a> </td>
       <td bgcolor="#edf4f9" ><a href="#hue" >hue</a> </td>       
     </tr>
     <tr>
       <td bgcolor="#edf4f9" ><a href="#roundrobin_frames" >roundrobin_frames</a> </td>
       <td bgcolor="#edf4f9" ><a href="#roundrobin_skip" >roundrobin_skip</a> </td>
       <td bgcolor="#edf4f9" ><a href="#switchfilter" >switchfilter</a> </td>
     </tr>
   </tbody>  
</table>
<p></p>
<p></p>
<p></p>
</ul>

<a href="#Options_Network_Cameras" >Network Cameras</a>
<ul>

<table border="1" class="fixed" >
  <colgroup>    
    <col width="250px">
    <col width="250px">
    <col width="250px">
    <col width="250px">
  </colgroup>
 	<tbody>
  	  <tr>
       <td bgcolor="#edf4f9" ><a href="#netcam_url" >netcam_url</a> </td>
       <td bgcolor="#edf4f9" ><a href="#netcam_userpass" >netcam_userpass</a> </td>
       <td bgcolor="#edf4f9" ><a href="#netcam_keepalive" >netcam_keepalive</a> </td>
       <td bgcolor="#edf4f9" ><a href="#netcam_proxy" >netcam_proxy</a> </td>
     </tr>
     <tr>
       <td bgcolor="#edf4f9" ><a href="#netcam_tolerant_check" >netcam_tolerant_check</a> </td>
       <td bgcolor="#edf4f9" ><a href="#rtsp_uses_tcp" >rtsp_uses_tcp</a> </td>
     </tr>
   </tbody>  
</table>

<p></p>
<p></p>
<p></p>
</ul>

<a href="#Options_Image_Processing" >Image_Processing</a>
<ul>

<table border="1" class="fixed" >
  <colgroup>    
    <col width="250px">
    <col width="250px">
    <col width="250px">
    <col width="250px">
  </colgroup>
 	<tbody>
  	  <tr> 	
       <td bgcolor="#edf4f9" ><a href="#rotate" >rotate</a> </td>
       <td bgcolor="#edf4f9" ><a href="#width" >width</a> </td>
       <td bgcolor="#edf4f9" ><a href="#height" >height</a> </td>
       <td bgcolor="#edf4f9" ><a href="#framerate" >framerate</a> </td>
     </tr>
  	  <tr>
  	    <td bgcolor="#edf4f9" ><a href="#minimum_frame_time" >minimum_frame_time</a> </td>
       <td bgcolor="#edf4f9" ><a href="#despeckle" >despeckle</a> </td>
       <td bgcolor="#edf4f9" ><a href="#locate_motion_mode" >locate_motion_mode</a> </td>
       <td bgcolor="#edf4f9" ><a href="#locate_motion_style" >locate_motion_style</a> </td>
     </tr>
  	  <tr>
  	    <td bgcolor="#edf4f9" ><a href="#text_left" >text_left</a> </td>
       <td bgcolor="#edf4f9" ><a href="#text_right" >text_right</a> </td>
       <td bgcolor="#edf4f9" ><a href="#text_changes" >text_changes</a> </td>
       <td bgcolor="#edf4f9" ><a href="#text_event" >text_event</a> </td>
     </tr>
  	  <tr>
       <td bgcolor="#edf4f9" ><a href="#text_double" >text_double</a> </td>
     </tr>
   </tbody>
</table>
     
<p></p>
<p></p>
<p></p>
</ul>

<a href="#Options_Motion_Detection" >Motion Detection</a>
<ul>

<table border="1" class="fixed" >
  <colgroup>    
    <col width="250px">
    <col width="250px">
    <col width="250px">
    <col width="250px">
  </colgroup>
 	<tbody>
  	  <tr>
       <td bgcolor="#edf4f9" ><a href="#emulate_motion" >emulate_motion</a> </td>
       <td bgcolor="#edf4f9" ><a href="#threshold" >threshold</a> </td>
       <td bgcolor="#edf4f9" ><a href="#threshold_tune" >threshold_tune</a> </td>
       <td bgcolor="#edf4f9" ><a href="#noise_level" >noise_level</a> </td>
     </tr>
  	  <tr>
   	 <td bgcolor="#edf4f9" ><a href="#noise_tune" >noise_tune</a> </td>
       <td bgcolor="#edf4f9" ><a href="#area_detect" >area_detect</a> </td>
       <td bgcolor="#edf4f9" ><a href="#mask_file" >mask_file</a> </td>
       <td bgcolor="#edf4f9" ><a href="#smart_mask_speed" >smart_mask_speed</a> </td>
     </tr>
  	  <tr>
  	    <td bgcolor="#edf4f9" ><a href="#lightswitch" >lightswitch</a> </td>
       <td bgcolor="#edf4f9" ><a href="#minimum_motion_frames" >minimum_motion_frames</a> </td>
       <td bgcolor="#edf4f9" ><a href="#event_gap" >event_gap</a> </td>
     </tr>
   </tbody>  
</table>

<p></p>
<p></p>
<p></p>
</ul>

<a href="#Options_Scripts" >Script Execution</a>
<ul>

<table border="1" class="fixed" >
  <colgroup>    
    <col width="250px">
    <col width="250px">
    <col width="250px">
    <col width="250px">
  </colgroup>
 	<tbody>
  	  <tr>
       <td bgcolor="#edf4f9" ><a href="#on_event_start" >on_event_start</a> </td>
       <td bgcolor="#edf4f9" ><a href="#on_event_end" >on_event_end</a> </td>
       <td bgcolor="#edf4f9" ><a href="#on_picture_save" >on_picture_save</a> </td>
       <td bgcolor="#edf4f9" ><a href="#on_motion_detected" >on_motion_detected</a> </td>
     </tr>
     <tr>
   	 <td bgcolor="#edf4f9" ><a href="#on_area_detected" >on_area_detected</a> </td>
       <td bgcolor="#edf4f9" ><a href="#on_movie_start" >on_movie_start</a> </td>
       <td bgcolor="#edf4f9" ><a href="#on_movie_end" >on_movie_end</a> </td>
       <td bgcolor="#edf4f9" ><a href="#on_camera_lost" >on_camera_lost</a> </td>
     </tr>
   </tbody>  
</table>

<p></p>
<p></p>
<p></p>
</ul>

<a href="#Options_Output_General" >Output - General</a>
<ul>

<table border="1" class="fixed" >
  <colgroup>    
    <col width="250px">
    <col width="250px">
    <col width="250px">
    <col width="250px">
  </colgroup>
 	<tbody>
  	  <tr>
       <td bgcolor="#edf4f9" ><a href="#quiet" >quiet</a> </td>
       <td bgcolor="#edf4f9" ><a href="#pre_capture" >pre_capture</a> </td>
       <td bgcolor="#edf4f9" ><a href="#post_capture" >post_capture</a> </td>
       <td bgcolor="#edf4f9" ><a href="#target_dir" >target_dir</a> </td>
     </tr>
   </tbody>  
</table>

<p></p>
<p></p>
<p></p>
</ul>

<a href="#Options_Pictures" >Output - Picture </a>
<ul>

<table border="1" class="fixed" >
  <colgroup>    
    <col width="250px">
    <col width="250px">
    <col width="250px">
    <col width="250px">
  </colgroup>
 	<tbody>
  	  <tr>
       <td bgcolor="#edf4f9" ><a href="#output_pictures" >output_pictures</a> </td>
       <td bgcolor="#edf4f9" ><a href="#output_debug_pictures" >output_debug_pictures</a> </td>
       <td bgcolor="#edf4f9" ><a href="#quality" >quality</a> </td>
       <td bgcolor="#edf4f9" ><a href="#picture_type" >picture_type</a> </td>       
     </tr>
  	  <tr>
   	 <td bgcolor="#edf4f9" ><a href="#snapshot_interval" >snapshot_interval</a> </td>
       <td bgcolor="#edf4f9" ><a href="#snapshot_filename" >snapshot_filename</a> </td>
       <td bgcolor="#edf4f9" ><a href="#picture_filename" >picture_filename</a> </td>
       <td bgcolor="#edf4f9" ><a href="#exif_text" >exif_text</a> </td>
     </tr>
   </tbody>  
</table>

<p></p>
<p></p>
<p></p>
</ul>

<a href="#Options_Movies" >Output - Movie</a>
<ul>

<table border="1" class="fixed" >
  <colgroup>    
    <col width="250px">
    <col width="250px">
    <col width="250px">
    <col width="250px">
  </colgroup>
 	<tbody>
  	  <tr>
       <td bgcolor="#edf4f9" ><a href="#max_movie_time" >max_movie_time</a> </td>
       <td bgcolor="#edf4f9" ><a href="#ffmpeg_output_movies" >ffmpeg_output_movies</a> </td>
       <td bgcolor="#edf4f9" ><a href="#ffmpeg_output_debug_movies" >ffmpeg_output_debug_movies</a> </td>
       <td bgcolor="#edf4f9" ><a href="#ffmpeg_timelapse" >ffmpeg_timelapse</a> </td>       
     </tr>
  	  <tr>
  	    <td bgcolor="#edf4f9" ><a href="#ffmpeg_timelapse_mode" >ffmpeg_timelapse_mode</a> </td>
       <td bgcolor="#edf4f9" ><a href="#ffmpeg_bps" >ffmpeg_bps</a> </td>
       <td bgcolor="#edf4f9" ><a href="#ffmpeg_variable_bitrate" >ffmpeg_variable_bitrate</a> </td>
       <td bgcolor="#edf4f9" ><a href="#ffmpeg_video_codec" >ffmpeg_video_codec</a> </td>       
     </tr>
  	  <tr>
    	 <td bgcolor="#edf4f9" ><a href="#ffmpeg_duplicate_frames" >ffmpeg_duplicate_frames</a> </td>
       <td bgcolor="#edf4f9" ><a href="#movie_filename" >movie_filename</a> </td>
       <td bgcolor="#edf4f9" ><a href="#timelapse_filename" >timelapse_filename</a> </td>
     </tr>
   </tbody>  
</table>

<p></p>
<p></p>
<p></p>
</ul>

<a href="#Options_Pipe" >Output - Pipe</a>
<ul>

<table border="1" class="fixed" >
  <colgroup>    
    <col width="250px">
    <col width="250px">
    <col width="250px">
    <col width="250px">
  </colgroup>
 	<tbody>
  	  <tr>
       <td bgcolor="#edf4f9" ><a href="#video_pipe" >video_pipe</a> </td>
       <td bgcolor="#edf4f9" ><a href="#motion_video_pipe" >motion_video_pipe</a> </td>
       <td bgcolor="#edf4f9" ><a href="#use_extpipe" >use_extpipe</a> </td>
       <td bgcolor="#edf4f9" ><a href="#extpipe" >extpipe</a> </td>
     </tr>
   </tbody>  
</table>

<p></p>
<p></p>
<p></p>
</ul>

<a href="#Options_Stream_Webcontrol" >Stream and Webcontrol</a>
<ul>
<table border="1" class="fixed" >
  <colgroup>    
    <col width="250px">
    <col width="250px">
    <col width="250px">
    <col width="250px">
  </colgroup>
 	<tbody>
  	  <tr>
       <td bgcolor="#edf4f9" ><a href="#ipv6_enabled" >ipv6_enabled</a> </td>
       <td bgcolor="#edf4f9" ><a href="#stream_port" >stream_port</a> </td>
       <td bgcolor="#edf4f9" ><a href="#stream_quality" >stream_quality</a> </td>
       <td bgcolor="#edf4f9" ><a href="#stream_motion" >stream_motion</a> </td>       
     </tr>
  	  <tr>
  	    <td bgcolor="#edf4f9" ><a href="#stream_maxrate" >stream_maxrate</a> </td>
       <td bgcolor="#edf4f9" ><a href="#stream_localhost" >stream_localhost</a> </td>
       <td bgcolor="#edf4f9" ><a href="#stream_limit" >stream_limit</a> </td>
       <td bgcolor="#edf4f9" ><a href="#stream_auth_method" >stream_auth_method</a> </td>       
     </tr>
     <tr>
       <td bgcolor="#edf4f9" ><a href="#stream_authentication" >stream_authentication</a> </td>       
       <td bgcolor="#edf4f9" ><a href="#stream_preview_scale" >stream_preview_scale</a> </td>
       <td bgcolor="#edf4f9" ><a href="#stream_preview_newline" >stream_preview_newline</a> </td>
       <td bgcolor="#edf4f9" ><a href="#webcontrol_port" >webcontrol_port</a> </td>
     </tr>
     <tr>
       <td bgcolor="#edf4f9" ><a href="#webcontrol_localhost" >webcontrol_localhost</a> </td>
       <td bgcolor="#edf4f9" ><a href="#webcontrol_html_output" >webcontrol_html_output</a> </td>
       <td bgcolor="#edf4f9" ><a href="#webcontrol_authentication" >webcontrol_authentication</a> </td>
     </tr>
   </tbody>  
</table>

<p></p>
<p></p>
<p></p>
</ul>

<a href="#Options_Database" >Database</a>
<ul>
<table border="1" class="fixed" >
  <colgroup>    
    <col width="250px">
    <col width="250px">
    <col width="250px">
    <col width="250px">
  </colgroup>
 	<tbody>
  	  <tr>
       <td bgcolor="#edf4f9" ><a href="#sql_log_picture" >sql_log_picture</a> </td>
       <td bgcolor="#edf4f9" ><a href="#sql_log_snapshot" >sql_log_snapshot</a> </td>
       <td bgcolor="#edf4f9" ><a href="#sql_log_movie" >sql_log_movie</a> </td>
       <td bgcolor="#edf4f9" ><a href="#sql_log_timelapse" >sql_log_timelapse</a> </td>       
     </tr>
  	  <tr>
  	    <td bgcolor="#edf4f9" ><a href="#sql_query" >sql_query</a> </td>
       <td bgcolor="#edf4f9" ><a href="#database_type" >database_type</a> </td>
       <td bgcolor="#edf4f9" ><a href="#database_dbname" >database_dbname</a> </td>
       <td bgcolor="#edf4f9" ><a href="#database_host" >database_host</a> </td>       
     </tr>
  	  <tr>
  	    <td bgcolor="#edf4f9" ><a href="#database_user" >database_user</a> </td>
       <td bgcolor="#edf4f9" ><a href="#database_password" >database_password</a> </td>
       <td bgcolor="#edf4f9" ><a href="#database_port" >database_port</a> </td>
       <td bgcolor="#edf4f9" ><a href="#database_busy_timeout" >database_busy_timeout</a> </td>
     </tr>
   </tbody>  
</table>

<p></p>
<p></p>
<p></p>
</ul>

<a href="#Options_Tracking" >Tracking</a>
<ul>

<table border="1" class="fixed" >
  <colgroup>    
    <col width="250px">
    <col width="250px">
    <col width="250px">
    <col width="250px">
  </colgroup>
 	<tbody>
  	  <tr>
       <td bgcolor="#edf4f9" ><a href="#track_type" >track_type</a> </td>
       <td bgcolor="#edf4f9" ><a href="#track_auto" >track_auto</a> </td>
       <td bgcolor="#edf4f9" ><a href="#track_port" >track_port</a> </td>
       <td bgcolor="#edf4f9" ><a href="#track_motorx" >track_motorx</a> </td>       
     </tr>
     <tr>
       <td bgcolor="#edf4f9" ><a href="#track_motorx_reverse" >track_motorx_reverse</a> </td>
       <td bgcolor="#edf4f9" ><a href="#track_motory" >track_motory</a> </td>
       <td bgcolor="#edf4f9" ><a href="#track_motory_reverse" >track_motory_reverse</a> </td>
       <td bgcolor="#edf4f9" ><a href="#track_maxx" >track_maxx</a> </td>       
     </tr>
     <tr>
       <td bgcolor="#edf4f9" ><a href="#track_minx" >track_minx</a> </td>
       <td bgcolor="#edf4f9" ><a href="#track_maxy" >track_maxy</a> </td>
       <td bgcolor="#edf4f9" ><a href="#track_miny" >track_miny</a> </td>
       <td bgcolor="#edf4f9" ><a href="#track_homex" >track_homex</a> </td>       
     </tr>
     <tr>
       <td bgcolor="#edf4f9" ><a href="#track_homey" >track_homey</a> </td>
       <td bgcolor="#edf4f9" ><a href="#track_iomojo_id" >track_iomojo_id</a> </td>
       <td bgcolor="#edf4f9" ><a href="#track_step_angle_x" >track_step_angle_x</a> </td>
       <td bgcolor="#edf4f9" ><a href="#track_step_angle_y" >track_step_angle_y</a> </td>
     </tr>
     <tr>    
       <td bgcolor="#edf4f9" ><a href="#track_move_wait" >track_move_wait</a> </td>
       <td bgcolor="#edf4f9" ><a href="#track_speed" >track_speed</a> </td>
       <td bgcolor="#edf4f9" ><a href="#track_stepsize" >track_stepsize</a> </td>
     </tr>
   </tbody>  
</table>

<p></p>
<p></p>
<p></p>
</ul>

<a name="conversion_specifiers">Conversion Specifiers</a>
<ul>
 
   
<table border="1" class="fixed" >
  <colgroup>    
    <col width="50px">
    <col width="300px">
    <col width="50px">
    <col width="300px">
    <col width="50px">
    <col width="300px">
  </colgroup>
 	<tbody>
  	  <tr>
       <td bgcolor="#edf4f9" >%Y </a> </td>
       <td bgcolor="#edf4f9" >year</a> </td>
       <td bgcolor="#edf4f9" >%m  </a> </td>
       <td bgcolor="#edf4f9" >month</a> </td>
       <td bgcolor="#edf4f9" >%d   </a> </td>
       <td bgcolor="#edf4f9" >date</a> </td>
     </tr>
     <tr>       
       <td bgcolor="#edf4f9" >%H   </a> </td>
       <td bgcolor="#edf4f9" >hour</a> </td>
       <td bgcolor="#edf4f9" >%M   </a> </td>
       <td bgcolor="#edf4f9" >minute</a> </td>
       <td bgcolor="#edf4f9" >%S   </a> </td>
       <td bgcolor="#edf4f9" >second</a> </td>
     </tr>
     <tr>
       <td bgcolor="#edf4f9" >%T   </a> </td>
       <td bgcolor="#edf4f9" >HH:MM:SS </a> </td>
       <td bgcolor="#edf4f9" >%v   </a> </td>
       <td bgcolor="#edf4f9" >event</a> </td>
       <td bgcolor="#edf4f9" >%q    </a> </td>
       <td bgcolor="#edf4f9" >frame number</a> </td>
       
     </tr>
     <tr>
       <td bgcolor="#edf4f9" >%t    </a> </td>
       <td bgcolor="#edf4f9" >thread (camera) number</a> </td>
       <td bgcolor="#edf4f9" >%D </a> </td>
       <td bgcolor="#edf4f9" >changed pixels</a> </td>
       <td bgcolor="#edf4f9" >%N </a> </td>
       <td bgcolor="#edf4f9" >noise level</a> </td>
       
     </tr>
     <tr>
       <td bgcolor="#edf4f9" >%i </a> </td>
       <td bgcolor="#edf4f9" >width of motion area,</a> </td>
       <td bgcolor="#edf4f9" >%J  </a> </td>
       <td bgcolor="#edf4f9" >height of motion area,</a> </td>
       <td bgcolor="#edf4f9" >%J  </a> </td>
       <td bgcolor="#edf4f9" >height of motion area,</a> </td>
       
     </tr>
     <tr>
       <td bgcolor="#edf4f9" >%K   </a> </td>
       <td bgcolor="#edf4f9" >X coordinates of motion center</a> </td>       
       <td bgcolor="#edf4f9" >%L  </a> </td>
       <td bgcolor="#edf4f9" >Y coordinates of motion center</a> </td>
       <td bgcolor="#edf4f9" >%C   </a> </td>
       <td bgcolor="#edf4f9" >value defined by text_event</a> </td>
       
     </tr>
     <tr>
       <td bgcolor="#edf4f9" >%f</a> </td>
       <td bgcolor="#edf4f9" >filename with full path</a> </td>
       <td bgcolor="#edf4f9" >%n   </a> </td>
       <td bgcolor="#edf4f9" >number indicating filetype</a> </td>
       <td bgcolor="#edf4f9" >   </a> </td>
       <td bgcolor="#edf4f9" >   </a> </td>       
     </tr>
    </tbody>
</table>
<p></p>
The use of quotation marks around string is permitted.  The conversion specifiers used have 
the same options as for the C function strftime (3) plus the few that are unique to Motion.
<p></p>
<p></p>
</ul>

 
<h2><strong><a name="Options_System_Processing"></a>System Processing</strong></h2>
<ul>

<p></p>
<h3><a name="daemon"></a> daemon </h3>
<p></p> 
<ul>
  <li> Type: Boolean</li>
  <li> Range / Valid values: on, off</li>
  <li> Default: off</li>
</ul> 
<p></p>
When Motion is started, immediately go to daemon mode and release the terminal.
<p></p>

<h3><a name="process_id_file"></a> process_id_file </h3>
<p></p> 
<ul>
  <li> Type: String</li>
  <li> Range / Valid values: </li>
  <li> Default: Not Defined</li>
</ul> 
<p></p>
Specify the full path and file name in order to store the pid for processing.
<p></p>

<h3><a name="setup_mode"></a> setup_mode </h3>
<p></p> 
<ul>
  <li> Type: Boolean</li>
  <li> Range / Valid values: on, off</li>
  <li> Default: off</li>
</ul> 
<p></p>
When this option is turned on, Motion starts in setup mode so that the 
parameters can be set more easily.  In setup mode two things happen:
With 'motion -s' Motion runs in console mode instead of daemon. It outputs a lot of 
useful information for each frame from the camera. Each message is prefixed by [number] 
where number is the camera number (thread number).
When you look at the webcam stream you see a black image with numbers. 
What you see is the number of changed pixels, number of labeled areas and noise setting. 
When something moves you see the pixels detected as Motion in black and white. The largest 
labeled area (assuming despeckle is enabled and with the 'l' at the end) is blue. It is 
only the blue areas which is counted as Motion. If smartmask is enabled you see this as red areas.

Here is a suggestion how to initially setup Motion.
<p></p> 
<ul>
  <li> Disable despeckle (comment it out in motion.conf).</li>
  <li> Disable smartmask</li>
  <li> Enable both http control and webcam by setting port numbers. Example 8080 for control and 8081 for webcam.</li>
  <li> Start Motion in setup mode</li> 
  <li> View the webcam stream. Either with Iceweasel or with Firefox by entering in the address of 
  <a href="http://localhost:8081/" rel="nofollow" target="_top">http://localhost:8080/</a> 
  </li>
  <li> Open a new tab and connect to the http interface. 
  <a href="http://localhost:8080/" rel="nofollow" target="_top">http://localhost:8080/</a> . 
  You can now control and change almost anything while Motion is running. To disable a feature enter a space.</li>
  <li> Start by experimenting with noise level. Do this both during daylight and during darkness. 
  You will be surprised to see how much noise a camera makes during night. Try using the automatic 
  noise feature. It should work for most.</li>
  <li> Now try the despeckle feature. Enable it using the recommended default EedDl. If this is not enough experiment. 
  Remember that the l must be the last letter.</li>
  <li> Set the threshold to what you want to trigger Motion.</li>
</ul>
In normal mode you can use the same setting with two browser tabs and experiment with 
settings of the camera if needed.
From the web interface you can ask Motion to write all your changes back to the config files 
(motion.conf and thread config files). 
<p></p>

<h3><a name="logfile"></a> logfile </h3>
<p></p> 
<ul>
  <li> Type: String</li>
  <li> Range / Valid values: Max 4095 characters</li>
  <li> Default: Not Defined</li>
</ul> 
<p></p>
Use this option to specify the full path and filename to use
for logging of the messages generated from Motion.  If this option
is not defined, the stderr and syslog is used. Note that Motion 
can generate a LOT of messages and as a result, this option should
be considered if the log_level is at any of the higher levels.

<p></p>

<h3><a name="log_level"></a> log_level </h3>
<p></p> 
<ul>
  <li> Type: Integer</li>
  <li> Range / Valid values: 1 - 9 </li>
  <li> Default: 6</li>
</ul> 
<p></p>
This option specifies the level of verbosity of the messages sent from Motion.  
At a level of 8(DBG), there are a LOT of messages.  At a level of 1(EMR) virtually no
messages will be output.
<p></p>
The various levels are [1..9] (EMR, ALR, CRT, ERR, WRN, NTC, INF, DBG, ALL). 
<p></p>
<p></p>

<h3><a name="log_type"></a> log_type </h3>
<p></p> 
<ul>
  <li> Type: Discreet Strings </li>
  <li> Range / Valid values: See Below</li>
  <li> Default: ALL</li>
</ul> 
<p></p>
The different components of Motion use different log types.  This option allows the 
user to only show the messages from particular components.  The choices for this option
are: COR, STR, ENC, NET, DBL, EVT, TRK, VID, ALL

<p></p>

<h3><a name="thread"></a> thread </h3>
<p></p> 
<ul>
  <li> Type: String</li>
  <li> Range / Valid values: Max 4095 characters</li>
  <li> Default: Not Defined</li>
</ul> 
<p></p>
The full path and file name for the thread file.  
Motion allows for this line to be listed in the motion.conf file multiple
times.  These specifications should be the LAST lines in the 
motion.conf file.  
See the <a href="#ConfigFiles">Configuration Files</a> section within
this guide for a completed discussion of what to put into the 
thread0.conf, thread1.conf, threadX.conf files that would be specified
in this option. 
<p></p>

<h3><a name="sdl_threadnr"></a> sdl_threadnr </h3>
<p></p> 
<ul>
  <li> Type: String</li>
  <li> Range / Valid values: Max 4095 characters</li>
  <li> Default: </li>
</ul> 
<p></p>
The SDL option is optional and unusual.  When SDL is included in the 
building of Motion, there is the ability for Motion to create a SDL preview 
window for the user.  The author believes this option to be more of a proof 
of concept on how to create a SDL window and show the image. (This same functionality
can be achieved via the stream options) To activate the SDL window, include SDL support in 
the building of the Motion application.  Start Motion and note the 
thread number indicated.  Once that is noted, specify that thread number (or 1 more than that number)
for this option.  When Motion is started again, it will then create a SDL window to preview
the image.  To close the window, press X.  Author is not aware of any method to restart the 
SDL window after it has been closed.
  
<p></p>
<p></p>
</ul>

<h2><a name="Options_Video4Linux_Devices"></a> <strong>Video4Linux Device</strong></h2>
<ul>
<p></p>
<h3><a name="videodevice"></a> videodevice </h3>
<p></p> 
<ul>
  <li> Type: String</li>
  <li> Range / Valid values: Max 4095 characters</li>
  <li> Default: /dev/video0 (FreeBSD: /dev/bktr0)</li>
</ul> 
<p></p>
The video device to be used for capturing. Default for Linux is /dev/video0. for FreeBSD the default is /dev/bktr0.
See the <a href="#Basic_Setup">Basic Setup</a>
section of this guide for a additional discussion of this option.
<p></p>
This is the video4linux device name. Ignore this for net cameras.
<p></p>

<h3><a name="v4l2_palette"></a> v4l2_palette </h3>
<p></p> 
<ul>
  <li> Type: String</li>
  <li> Range / Valid values: Max 4095 characters</li>
  <li> Default: </li>
</ul> 
<p></p>
The v4l2_palette allows the user to choose preferable palette to be use by Motion.  Note that this 
is only the preferred option.  If the video device does not support the requested format, Motion will
loop through the available palettes to try to find one that is supported by both Motion and the device.
Motion will report the supported palettes of the device when Motion starts when the log_level 
is specified as NTC or higher.  The default of 17 is highly preferred since this the native 
format that Motion uses internally.  
<ul>
<li> V4L2_PIX_FMT_SN9C10X : 0  'S910'</li>
<li> V4L2_PIX_FMT_SBGGR16 : 1  'BYR2'</li>
<li> V4L2_PIX_FMT_SBGGR8  : 2  'BA81'</li>
<li> V4L2_PIX_FMT_SPCA561 : 3  'S561'</li>
<li> V4L2_PIX_FMT_SGBRG8  : 4  'GBRG'</li>
<li> V4L2_PIX_FMT_SGRBG8  : 5  'GRBG'</li>
<li> V4L2_PIX_FMT_PAC207  : 6  'P207'</li>
<li> V4L2_PIX_FMT_PJPG    : 7  'PJPG'</li>
<li> V4L2_PIX_FMT_MJPEG   : 8  'MJPEG'</li>
<li> V4L2_PIX_FMT_JPEG    : 9  'JPEG'</li>
<li> V4L2_PIX_FMT_RGB24   : 10 'RGB3'</li>
<li> V4L2_PIX_FMT_SPCA501 : 11 'S501'</li>
<li> V4L2_PIX_FMT_SPCA505 : 12 'S505'</li>
<li> V4L2_PIX_FMT_SPCA508 : 13 'S508'</li>
<li> V4L2_PIX_FMT_UYVY    : 14 'UYVY'</li>
<li> V4L2_PIX_FMT_YUYV    : 15 'YUYV'</li>
<li> V4L2_PIX_FMT_YUV422P : 16 '422P'</li>
<li> V4L2_PIX_FMT_YUV420  : 17 'YU12'</li>

</ul>

<p></p>

<h3><a name="tunerdevice"></a> tunerdevice </h3>
<p></p> 
<ul>
  <li> Type: String</li>
  <li> Range / Valid values: Max 4095 characters</li>
  <li> Default: /dev/tuner0 </li>
</ul> 
<p></p>
The tuner device used for controlling the tuner in a tuner card. This option is only used when Motion is compiled 
for FreeBSD.  Make sure to remove or comment out this option when running Motion under Linux.
See the <a href="#Basic_Setup">Basic Setup</a> section of this guide for a additional discussion of this option.
<p></p>

<h3><a name="input"></a> input </h3>
<p></p> 
<ul>
  <li> Type: Integer</li>
  <li> Range / Valid values: -1, 0 - 7</li>
  <li> Default: 1 (Disabled) /li>
</ul> 
<p></p>
Input channel to use expressed as an integer number starting from 0. 
This option should normally be set to 1 for video/TV cards, and -1 for USB cameras.
This parameter is used only with video capture cards that has more than one input.
However if you set the input number to e.g. 1 for a USB camera Motion writes an error message 
back. If you set it to -1 it does not give you any warning.
If you have a video capture card you can define the channel to tune to using this option. 
If you are using a USB device, network camera or a capture card without tuner you should 
set the value to the default -1.
Many TV tuner cards have the input channels: TV Tuner = 0, 
Standard composite video = 1, S-VHS = 3. Other have TV=0, composite video 1= 1, 
composite video = 2,  S-VHS = 3. It is recommended to set the parameter to -1 for USB cameras as 
your first try. For video capture cards input 1 is normally the composite video input.
<p></p>

<h3><a name="norm"></a> norm </h3>
<p></p> 
<ul>
  <li> Type: Discrete Strings</li>
  <li> Range / Valid values: 0 (PAL), 1 (NTSC), 2 (SECAM), 3 (PAL NC no colour)</li>
  <li> Default: 0 (PAL) </li>
</ul> 
<p></p>
Select the norm of the video device. Values: 0 (PAL), 1 (NTSC), 2 (SECAM), 3 (PAL NC no colour). Default: 0 (PAL)
This value is only used for capture cards using the BTTV driver.
<p></p>

<h3><a name="frequency"></a> frequency </h3>
<p></p> 
<ul>
  <li> Type: Integer</li>
  <li> Range / Valid values: 0 - 999999</li>
  <li> Default: 0 (Not set)</li>
</ul> 
<p></p>
The frequency to set the tuner to (kHz) per the tuner specifications.  The default is 0 meaning 
not set.  This option is only relevant if you have a TV tuner card where you can select the tuner frequency. 
Your tuner card must support this feature.
<p></p>

<h3><a name="power_line_frequency"></a> power_line_frequency </h3>
<p></p> 
<ul>
  <li> Type: Integer</li>
  <li> Range / Valid values: -1 to 3 </li>
  <li> Default: -1 </li>
</ul> 
<p></p>
This option allows the user to specify the power line frequency that is applicable to the user.  This option
can help stabilize the images of some webcams that are sensitive to this frequency.  This is not normally necessary.
<ul>
<li> -1 : Do not modify device setting</li>
<li> 0  : Power line frequency Disabled</li>
<li> 1  : 50hz</li>
<li> 2  : 60hz</li>
<li> 3  : Auto</li>
</ul>

<p></p>

<h3><a name="auto_brightness"></a> auto_brightness </h3>
<p></p> 
<ul>
  <li> Type: Boolean</li>
  <li> Range / Valid values: on, off</li>
  <li> Default: off </li>
</ul> 
<p></p>
Let motion regulate the brightness of a video device. Only recommended for cameras without auto brightness
Motion will try to adjust the brightness of the video device if the images captured are too dark or too light. 
This option will be most useful for video devices which sometimes don't have such an option in 
hardware.  The auto_brightness feature will adjust the brightness of the device up or down until the value defined 
by the option brightness is reached (1 = dark, 255 = bright). If brightness is zero auto_brightness will try to 
adjust to the average brightness level 128.  You need to know if the camera supports auto brightness. Most cameras 
have auto everything. If your video device already does this for you this option might cause oscillations. If you 
do not know assume that it has and do not use the Motion auto brightness feature. At least not to start with.
<p></p>

<h3><a name="brightness"></a> brightness </h3>
<p></p> 
<ul>
  <li> Type: Integer</li>
  <li> Range / Valid values: 0 - 255</li>
  <li> Default: 0 (disabled) </li>
</ul> 
<p></p>
The brightness level for the video device.  Value 0 means that Motion does not set the brightness value but 
leaves it unchanged.  If this setting is used in conjunction with the auto_brightness feature then this setting
is the average brightness level in the range 1 (dark) to 255 (bright) that the auto_brightness feature will try 
to achieve by adjusting the device brightness up and down.
<p></p>

<h3><a name="contrast"></a> contrast </h3>
<p></p> 
<ul>
  <li> Type: Integer</li>
  <li> Range / Valid values: 0 - 255</li>
  <li> Default: 0 (disabled) </li>
</ul>
<p></p>
The contrast level for the video device.  Disabled (Value 0) means that Motion does not set the contrast value.
<p></p>

<h3><a name="saturation"></a> saturation </h3>
<p></p> 
<ul>
  <li> Type: Integer</li>
  <li> Range / Valid values: 0 - 255</li>
  <li> Default: 0 (disabled) </li>
</ul> 
<p></p>
The color saturation level for the video device.
<p></p>

<h3><a name="hue"></a> hue </h3>
<p></p> 
<ul>
  <li> Type: Integer</li>
  <li> Range / Valid values: 0 - 255</li>
  <li> Default: 0 (disabled) </li>
</ul> 
<p></p>
The hue level for the video device.
<p></p>


<h3><a name="roundrobin_frames"></a> roundrobin_frames </h3>
<p></p> 
<ul>
  <li> Type: Integer</li>
  <li> Range / Valid values: 1 - 2147483647</li>
  <li> Default: 1</li>
</ul> 
<p></p>
Specifies the number of frames to capture before switching inputs, this way also slow switching (e.g. every second) 
is possible.  The Round Robin feature is automatically activated where multiple threads are sharing the same video 
device. Each thread can then set different input channels or frequencies to change camera.  If multiple threads use 
the same video device, they each can capture roundrobin_frames number of frames before having to share the device 
with the other threads.
<p></p>
The RoundRobin feature is automatically activated where multiple threads are sharing the same 
video device (for example /dev/video0). Each thread can then set different input channels 
to change camera with the <code>input</code> option or by tuning the tuner with the
<code>frequency</code> option.
Round Robin is not relevant for Network cameras or standard USB web cameras. 
The Round Robin feature is used with video capture cards which have multiple inputs per video chip.
Note that round robin is not the ideal way to run multiple cameras. When the capture card changes 
input it takes a little while before the decoder chip has syncronized to the new camera. You can 
improve this if you have expensive cameras with a syncronize input. Only one camera can be decoded 
at a time so if you have 4 cameras connected 3 of the camera threads will need to wait for their 
turn. The fact that cameras have to take turns and the fact that you have to skip a few frames after 
each turn dramatically lowers the possible framerate. You can get a high framerate by viewing each 
camera for a long time. But then you may miss the action on one of the inactive cameras. If you can 
afford it avoid Round Robin and buy the more expensive type of capture cards that has one decoder chip 
per input. If you only need 2 or 3 cameras you can also simply put 2 or 3 cheap TV cards in the computer. 
Linux has no problem working with multiple TV cards. (or better yet, it multiple cheap network cameras)
If multiple threads use the same video device, they each can capture <code>roundrobin_frames</code> number of frames 
before having to share the device with the other threads.
When another thread wants to watch another input or frequency or size the first
<code>roundrobin_skip</code> number of frames are skipped to allow the device to settle.
The last option <code>switch_filter</code> is supposed to prevent the change of camera from being detected 
as Motion. Its function is not perfect and sometimes prevents detection of real motion. You should start 
with having the option disabled and then try with the option enabled to see if you can skip less frames 
without loosing the detection of the type of motion you normally want to detect.


<p></p>

<h3><a name="roundrobin_skip"></a> roundrobin_skip </h3>
<p></p> 
<ul>
  <li> Type: Integer</li>
  <li> Range / Valid values: 1 - 2147483647</li>
  <li> Default: 1</li>
</ul> 
<p></p>
Specifies the number of frames to skip after a switch. (1 if you are feeling lucky, 2 if you want to be safe).
The Round Robin feature is automatically activated where multiple threads are sharing the same video device. 
Each thread can then set different input channels or frequencies to change camera.
When another thread wants to watch another input or frequency or size the first roundrobin_
skip number of frames are skipped to allow the device to settle.
<p></p>

<h3><a name="switchfilter"></a> switchfilter </h3>
<p></p> 
<ul>
  <li> Type: Boolean</li>
  <li> Range / Valid values: on, off</li>
  <li> Default: off</li>
</ul> 
<p></p>
Turns the switch filter on or off. The filter can distinguish between most switching noise and real motion. With this 
you can even set roundrobin_skip to 1 without generating much false detection.
This is a round robin related feature used when you have a capture card with multiple inputs (controlled by the 
'input' option) on the same videodevice.
<p></p>
<p></p>
</ul>

<h2><a name="Options_Network_Cameras"></a><strong>Network Cameras</strong></h2>
<ul>
<p></p>
Motion can connect to a network camera through a normal TCP socket. All you need to give it is the URL. 
The URL given must return either one single jpeg picture or an mjpeg stream. For the time being Motion 
cannot connect to a video stream such a mpeg, mpeg4, divx. The URL must return one single jpeg image, a mjpeg stream
a rtsp stream, file or ftp.  When getting a still image, make sure to validate that the camera is serving up 
a actual raw JPG file and not a HTML page with an embedded JPG which is the current 
standard.
When the netcam_url is defined the video4linux options above are ignored.  
If the connection to a network camera is lost, Motion will reuse the last good image for 
approx 30 seconds. After 30 seconds the image is replaced by a grey image with a text 
telling that the signal is lost and when the connection was lost.
<em>This text and its date format is not configurable.</em>


<h3><a name="netcam_url"></a> netcam_url </h3>
<p></p> 
<ul>
  <li> Type: String</li>
  <li> Range / Valid values: Max 4095 characters</li>
  <li> Default: Not defined</li>
</ul> 
<p></p>
URL to use if you are using a network camera, size will be autodetected
Available prefixes to the URL:
 <ul>
<li> http://</li> 
<li>ftp:// </li>
<li>mjpg:// </li>
<li>rtsp:// </li>
<li>mjpeg:// </li> 
<li>file:/// </li> 
 </ul>

The prefixes of mjpg and mjpeg are not actual protocols and allow the user to specify 
different formats and methods to access the network stream.  They are internally translated
into http.  For options such as rtsp, it is recommended that the connection string be
validated with other applications such as ffplay or VLC.

<p></p>
When the netcam_url is defined the video4linux options are ignored.
<p></p>

<h3><a name="netcam_userpass"></a> netcam_userpass </h3>
<p></p> 
<ul>
  <li> Type: String</li>
  <li> Range / Valid values: Max 4095 characters</li>
  <li> Default: Not defined</li>
</ul> 
<p></p>
The Username and password for the network camera.  For http protocols, this 
option is for HTTP 1.1 Basic authentication. The string is specified as username:password. 
Do not specify this option for no authentication.  To use no authentication simply 
remove this option.  Note that only basic authentication is 
supported for connection to netwwork cameras.  Digest authentication is not currently available

<p></p>

<h3><a name="netcam_keepalive"></a> netcam_keepalive </h3>
<p></p> 
<ul>
  <li> Type: String</li>
  <li> Range / Valid values: Max 4095 characters</li>
  <li> Default: </li>
</ul> 
<p></p>
The setting for keep-alive of network socket, should improve performance on compatible net cameras.
<ul>
<li> off:   The historical implementation using HTTP/1.0, closing the socket after each http request.</li>
<li> force: Use HTTP/1.0 requests with keep alive header to reuse the same connection.</li>
<li> on:    Use HTTP/1.1 requests that support keep alive as default.</li>
</ul>

<p></p>

<h3><a name="netcam_proxy"></a> netcam_proxy </h3>
<p></p> 
<ul>
  <li> Type: String</li>
  <li> Range / Valid values: Max 4095 characters</li>
  <li> Default: Not defined</li>
</ul> 
<p></p>
URL to use for a netcam proxy server, if required. The syntax is
<a href="http://myproxy:portnumber" rel="nofollow" target="_top">http://myproxy:portnumber</a>
Use this if you need to connect to a network camera through a proxy server.
Example of syntax: "http://myproxy.mydomain.com:1024
If the proxy port number is 80 you can ommit the port number. Then the syntax is use "http://myproxy.mydomain.com" .
Leave this option undefined if you do not use a proxy server.
<p></p>

<h3><a name="netcam_tolerant_check"></a> netcam_tolerant_check </h3>
<p></p> 
<ul>
  <li> Type: String</li>
  <li> Range / Valid values: Max 4095 characters</li>
  <li> Default: </li>
</ul> 
<p></p>
Use less strict jpeg checks for network cameras
<p></p>

<h3><a name="rtsp_uses_tcp"></a> rtsp_uses_tcp </h3>
<p></p> 
<ul>
  <li> Type: String</li>
  <li> Range / Valid values: on off</li>
  <li> Default: on</li>
</ul> 
<p></p>
This option specifies the transport method for rtsp cameras.  The TCP transport is highly preferred because
without this option the rtsp images are frequently corrupted and result in many false positive values and 
images that appear to be smeared.  Off indicates that UDP will be used.  
<p></p>
<p></p>
</ul>

<h2><a name="Options_Image_Processing"></a> <strong>Image Processing</strong></h2>
<ul>
<p></p>
<h3><a name="rotate"></a> rotate </h3>
<p></p> 
<ul>
  <li> Type: Discrete Strings</li>
  <li> Range / Valid values: 0, 90, 180, 270</li>
  <li> Default: 0 (not rotated)</li>
</ul> 
<p></p>
Rotate image the given number of degrees. The rotation affects all saved images as well as movies.
The rotation feature is used when the camera is hanging upside down (180 degrees) or if you choose a picture 
format in portrait instead of the normal landscape (90 or 270 degrees).
Note that the CPU load increases when using this feature with a value other than 0. Also note that 
Motion automatically swaps width and height if you rotate 90 or 270 degrees, so you don't have to touch these options.
<p></p>

<h3><a name="width"></a> width </h3>
<p></p> 
<ul>
  <li> Type: Integer</li>
  <li> Range / Valid values: Device Dependent</li>
  <li> Default: 352</li>
</ul> 
<p></p>
The width in pixels of each frame. Valid range is camera dependent.
Motion does not scale so should be set to the actual size of the v4l device.
In case of a net camera motion sets the height to the height of the first image read
except for rtsp streams which does rescale the network camera image to the 
requested dimensions.  Note that this rescaling comes at a very high CPU cost so it
is recommended that the network camera send the image in the same dimensions as included 
in the configuration file.
Motion actually set the size of the image coming from the video4linux device.
Your camera or capture/TV card will not support any picture size. You must know 
which frame size (width and height) the camera supports. If you do not know start with 
width 320 and height 240 which most cameras and capture cards supports.
For some device drivers like pwc (driver for Philips USB cameras) setting the 
size to a non-standard value makes the driver create an image of the nearest 
smaller size and create a gray band around the image to fit the size given by 
motion. Note that it is the driver and not motion that generates the gray band. 
Motion will try to detect motion in the entire image including the gray band.
Older versions of Motion required that dimensions of image must have both height and width that are a multiple of 16. 
The latest versions have eliminated this requirement. 
<p></p>

<h3><a name="height"></a> height </h3>
<p></p> 
<ul>
  <li> Type: Integer</li>
  <li> Range / Valid values: Device Dependent</li>
  <li> Default: 288</li>
</ul> 
<p></p>
The height of the image in pixels. Motion does not scale so should be set to the actual size of the device. 
In case of a net camera motion sets the height to the height of the first image read
except for rtsp streams which does rescale the network camera image to the 
requested dimensions.  Note that this rescaling comes at a very high CPU cost so it
is recommended that the network camera send the image in the same dimensions as included 
in the configuration file.
Motion actually set the size of the image coming from the device.
Your camera or capture/TV card will not support any picture size. You must know which frame size 
(width and height) the camera supports. If you do not know start with width 320 and height 240 which 
most cameras and capture cards supports.
For some device drivers like pwc (driver for Philips USB cameras) setting the size to a non-standard value 
makes the driver create an image of the nearest smaller size and create a gray band around the image to fit 
the size given by motion. Note that it is the driver and not motion that generates the gray band. Motion will 
try to detect motion in the entire image including the gray band.
Older versions of Motion required that dimensions of image must have both height and width that are a multiple of 16. 
The latest versions have eliminated this requirement. 
<p></p>

<h3><a name="framerate"></a> framerate </h3>
<p></p> 
<ul>
  <li> Type: Integer</li>
  <li> Range / Valid values: 2 - 100</li>
  <li> Default: 100 (no limit)</li>
</ul> 
<p></p>
Maximum number of frames to be captured from the camera per second.  
The faster you fetch pictures from the camera the more CPU load you 
get and the more pictures get included when Motion is detected.
Motion will stop storing pictures if the framerate is set to less than 2.
Set this parameter to the maximum number of images per second that you want 
to store either as images or as movies.
To set intervals longer than one second use the 'minimum_gap' option instead.
<p></p>

<h3><a name="minimum_frame_time"></a> minimum_frame_time </h3>
<p></p> 
<ul>
  <li> Type: Integer</li>
  <li> Range / Valid values: 0 - 2147483647</li>
  <li> Default: 0</li>
</ul> 
<p></p>
Minimum time in seconds between the capturing picture frames from the camera. Default: 0 = disabled - the capture 
rate is given by the camera framerate.
This option is used when you want to capture images at a rate lower than 2 per second.
When this is enabled the framerate option is used only to set the pace the Motion service the 
webcam port etc. 

<p></p>

<h3><a name="despeckle"></a> despeckle </h3>
<p></p> 
<ul>
  <li> Type: String</li>
  <li> Range / Valid values: EedDl</li>
  <li> Default: Not defined </li>
</ul> 
<p></p>
Despeckle motion image using combinations of (E/e)rode or (D/d)ilate. And ending with optional (l)abeling.
A way of tuning (by removing or enhancing) noise in the motion image. Options for the despeckle feature are 
any of 'e', 'E', 'd' or 'D'. This can be combined by a trailing 'l' (letter l) which enables the labeling 
feature. Default: Not Defined (Don't despeckle and label).
Wind blowing grass and trees around or poor light conditions can cause a lot of dots (or noise) to appear in the 
motion image (See the section on Tuning Motion). This feature removes (or enhances!) this noise and so improves 
the reliability of motion.
The 'e' option removes diamonds, 'E' removes squares and alternating eE will remove circles. Each e/E you add will 
shrink the noise by a pixel all the way around. So 'despeckle Ee' will remove circles of radius 2. However, this 
will also shrink the detection by 2 and will affect the threshold. So to remove noise and then restore the detected 
motion to its original size try 'despeckle EedD'.
After the despeckle feature is done you can let the labeling feature search for areas of connected pixels and "label" 
each area. The program will now trigger motion based on the number of changed pixels in the largest area. In other words, 
the largest labeled area has to be above the threshold to trigger a motion detected.
The value EedDl is a good starting point. The possible combinations are endless and it requires many experiments to 
find the best combination. Just remember that the labeling feature only works as intended if it runs after the 
despeckle feature. Ie. the letter 'l' must be the last letter and only one 'l'.
If you have very few problems with false detections leave this option either blank or at EedD which will remove 
most of the single pixel noise.
A very detailed technical explanation of the despeckle part can be found at the webpage of the author of this 
feature <a href="http://emit.demon.co.uk/motion/" rel="nofollow" target="_top">Ian McConnell's Webcam: Motion 
Web Page</a>

<p></p>

<h3><a name="locate_motion_mode"></a> locate_motion_mode </h3>
<p></p> 
<ul>
  <li> Type: Boolean</li>
  <li> Range / Valid values: on, off, preview</li>
  <li> Default: off</li>
</ul> 
<p></p>
Locate and draw a box around the moving object. Value 'preview' makes Motion only draw a box on a 
saved preview jpeg image and not on the saved movie.
<p></p>

<h3><a name="locate_motion_style"></a> locate_motion_style </h3>
<p></p> 
<ul>
  <li> Type: String</li>
  <li> Range / Valid values: box, redbox, cross, redcross</li>
  <li> Default: </li>
</ul> 
<p></p>
 Set the look and style of the locate box if enabled.
<p></p>


<h3><a name="text_left"></a> text_left </h3>
<p></p> 
<ul>
  <li> Type: String</li>
  <li> Range / Valid values: Max 4095 characters</li>
  <li> Default: </li>
</ul>
User defined text overlayed on each in the lower left corner. 
Use A-Z, a-z, 0-9, " / ( ) @ ~ # &lt; &gt; \ , . : - + _ \n and conversion specifiers 
<p></p>
If the option is not defined no text is displayed at this position.
<p></p>
You can use <a href="#conversion_specifiers">Conversion Specifiers</a> to define this field and also include
a new line specifier as \n and spaces if this option is enclosed in quotes.   
<p></p>
<p></p>
By combining spaces and new lines '\n' you can place 
your text anywhere on the picture. When setting the text using http remote control the text 
must be URL encoded. The browser does this for you. If you need 
to set it with a command line tool, use a browser first and let it make the encoded URL for you. Then 
you can copy paste it to your script file or cron line or whatever you want to use.
<p></p>
This is how the overlayed text is located.
<p></p>
<table border="1" width="354">
    <tr>
        <td width="344">
            <table cellpadding="0" cellspacing="0" width="344">
                <tr>
                    <td width="216">
                        <p>&nbsp;&nbsp;<br><br><br><br><br><br>&nbsp;</p>
                    </td>
                    <td width="128">
                        <p align="right">&nbsp;CHANGES<br><br><br><br><br><br>&nbsp;</p>
                    </td>
                </tr>
                <tr>
                    <td width="216">
                        <p><br><br>TEXT_LEFT</p>
                    </td>
                    <td width="128">
                        <p align="right">TEXT_RIGHT<br>YYYY-MM-DD<br>HH:MM:SS&nbsp;</p>
                    </td>
                </tr>
            </table>
        </td>
    </tr>
</table>
<p></p>
<p></p>

<h3><a name="text_right"></a> text_right </h3>
<p></p> 
<ul>
  <li> Type: String</li>
  <li> Range / Valid values: Max 4095 characters</li>
  <li> Default: %Y-%m-%d\n%T</li>
</ul> 
<p></p>
User defined text overlayed on each in the lower right corner. 
Use A-Z, a-z, 0-9, " / ( ) @ ~ # &lt; &gt; \ , . : - + _ \n and conversion specifiers 
<p></p>
If the option is not defined no text is displayed at this position.
<p></p>
You can use <a href="#conversion_specifiers">Conversion Specifiers</a> to define this field and also include
a new line specifier as \n and spaces if this option is enclosed in quotes.   
<p></p>
<p></p>
By combining spaces and new lines '\n' you can place 
your text anywhere on the picture. When setting the text using http remote control the text 
must be URL encoded. The browser does this for you. If you need 
to set it with a command line tool, use a browser first and let it make the encoded URL for you. Then 
you can copy paste it to your script file or cron line or whatever you want to use.
<p></p>
A major difference from text_left is that if this option is undefined the 
default is %Y-%m-%d\n%T which displays the date in ISO format YYYY-MM-DD and below the 
time in 24 hour clock HH:MM:SS.
<p></p>
This is how the overlayed text is located.
<p></p>
<table border="1" width="354">
    <tr>
        <td width="344">
            <table cellpadding="0" cellspacing="0" width="344">
                <tr>
                    <td width="216">
                        <p>&nbsp;&nbsp;<br><br><br><br><br><br>&nbsp;</p>
                    </td>
                    <td width="128">
                        <p align="right">&nbsp;CHANGES<br><br><br><br><br><br>&nbsp;</p>
                    </td>
                </tr>
                <tr>
                    <td width="216">
                        <p><br><br>TEXT_LEFT</p>
                    </td>
                    <td width="128">
                        <p align="right">TEXT_RIGHT<br>YYYY-MM-DD<br>HH:MM:SS&nbsp;</p>
                    </td>
                </tr>
            </table>
        </td>
    </tr>
</table>
<p></p>
<p></p>

<h3><a name="text_changes"></a> text_changes </h3>
<p></p> 
<ul>
  <li> Type: Boolean</li>
  <li> Range / Valid values: on, off</li>
  <li> Default: off</li>
</ul> 
<p></p>
Turns the text showing changed pixels on/off.
By setting this option to 'on' the number of pixels that changed compared to the 
reference frame is displayed in the upper right corner of the pictures. This is good for calibration and testing. 
This is how the overlayed text is located.
<p></p>
<table border="1" width="354">
    <tr>
        <td width="344">
            <table cellpadding="0" cellspacing="0" width="344">
                <tr>
                    <td width="216">
                        <p>&nbsp;&nbsp;<br><br><br><br><br><br>&nbsp;</p>
                    </td>
                    <td width="128">
                        <p align="right">&nbsp;CHANGES<br><br><br><br><br><br>&nbsp;</p>
                    </td>
                </tr>
                <tr>
                    <td width="216">
                        <p><br><br>TEXT_LEFT</p>
                    </td>
                    <td width="128">
                        <p align="right">TEXT_RIGHT<br>YYYY-MM-DD<br>HH:MM:SS&nbsp;</p>
                    </td>
                </tr>
            </table>
        </td>
    </tr>
</table>
<p></p>

<h3><a name="text_event"></a> text_event </h3>
<p></p> 
<ul>
  <li> Type: String</li>
  <li> Range / Valid values: Max 4095 characters</li>
  <li> Default: Default: %Y%m%d%H%M%S</li>
</ul> 
<p></p>
This option is special in that it defines the conversion specifier %C which can be used both for text 
display and for filenames.  This option defines the value of the special event conversion specifier %C. 
You can use any conversion specifier in this option except %C. Date and time values are from the timestamp 
of the first image in the current event.  The idea is that %C can be used filenames and text_left/right for 
creating a unique identifier for each event.  Option text_event defines the value %C which then can be used in 
filenames and text_right/text_left. The text_event/%C uses the time stamp for the first image detected in a new 
event. %C is an empty string when no event is in progress (gap period expired). Pre_captured and 
minimum_motion_frames images are time stamped before the event happens so %C in text_left/right does not 
have any effect on those images.

You can use <a href="#conversion_specifiers">Conversion Specifiers</a> to define this field (except for 
this option itself) 
   
<p></p>

<h3><a name="text_double"></a> text_double </h3>
<p></p> 
<ul>
  <li> Type: Boolean</li>
  <li> Range / Valid values: on, off</li>
  <li> Default: off</li>
</ul> 
<p></p>
Draw characters at twice normal size on images.
This option makes the text defined by text_left, text_right and text_changes twice the normal size. 
This may be useful when using large picture formats such as 1280 x 720.
<p></p>
<p></p>
</ul>

<h2><a name="Options_Motion_Detection"></a> <strong>Motion Detection</strong></h2>
<ul>
<p></p>
<h3><a name="emulate_motion"></a> emulate_motion </h3>
<p></p> 
<ul>
  <li> Type: String</li>
  <li> Range / Valid values: on off</li>
  <li> Default: off</li>
</ul> 
<p></p>
Always save images even if there was no motion
<p></p>

<h3><a name="threshold"></a> threshold </h3>
<p></p> 
<ul>
  <li> Type: Integer</li>
  <li> Range / Valid values: 1 - 2147483647</li>
  <li> Default: 1500</li>
</ul> 
<p></p>
Threshold for declaring motion. The threshold is the number of changed
 pixels counted after noise filtering, masking, despeckle, and labelling.
 The 'threshold' option is the most important detection setting. When motion runs it compares 
 the current image frame with the previous and counts the number of changed pixels after having 
 processed the image with noise filtering, masking, despeckle and labeling. If more pixels than defined 
 by 'threshold' have changed we assume that we have detected motion. Set the threshold as low as possible 
 so that you get the motion you want detected but large enough so that you do not get detections from noise 
 and plants moving. Note that the larger your frames are, the more pixels you have. So for large picture frame 
 sizes you need a higher threshold.
 Use the -s (setup mode) command line option and/or the text_changes config file option to experiment to find 
 the right threshold value. If you do not get small movements detected (see the mouse on the kitchen floor) lower 
 the value. If motion detects too many birds or moving trees, increase the number. (Unless of course 
 you are one of the many many users who use Motion to bird watch!)  
 Practical values would be from a few hundred to thousands.
<p></p>

<h3><a name="threshold_tune"></a> threshold_tune </h3>
<p></p> 
<ul>
  <li> Type: Boolean</li>
  <li> Range / Valid values: on, off</li>
  <li> Default: off</li>
</ul> 
<p></p>
Activate the automatic tuning of threshold level.
This feature makes Motion continuously adjust the threshold for declaring motion.
The threshold setting is ignored when activating this feature. It may give different results depending 
on your camera, light conditions, indoor/outdoor, the motion to be detected etc. If it does not work well, 
deactivate the 'threshold_tune' option and use the manual setting of threshold instead.

<p></p>

<h3><a name="noise_level"></a> noise_level </h3>
<p></p> 
<ul>
  <li> Type: Integer</li>
  <li> Range / Valid values: 1 - 255</li>
  <li> Default: 32</li>
</ul> 
<p></p>
The noise level is used as a threshold for distinguishing between noise and motion.
This is different from the threshold parameter. This is changes at pixel level. The purpose is to 
eliminate the changes generated by electric noise in the camera. Especially in complete darkness 
you can see the noise as small grey dots that come randomly in the picture. This noise can create 
false motion detection. What this parameter means is that the intensity of a pixel must change more 
than +/- the noise threshold parameter to be counted.
<p></p>

<h3><a name="noise_tune"></a> noise_tune </h3>
<p></p> 
<ul>
  <li> Type: Boolean</li>
  <li> Range / Valid values: on, off</li>
  <li> Default: on</li>
</ul> 
<p></p>
Activates the automatic tuning of noise level.
This feature makes Motion continuously adjust the noise 
threshold for distinguishing between noise and motion. 
The 'noise_level' setting is ignored when activating this feature.  
It may give different results depending on camera and light conditions. 
<p></p>

<h3><a name="area_detect"></a> area_detect </h3>
<p></p> 
<ul>
  <li> Type: String</li>
  <li> Range / Valid values: Max 4095 characters</li>
  <li> Default: </li>
</ul> 
<p></p>
Detect motion in predefined areas (1 - 9) and when Motion is detected in the area, execute the script.  All of 
motion detection still continue.  This option is only to execute the on_area_detect script.
<p></p>
Areas are numbered like
<ul>
<li>1 2 3</li>
<li>4 5 6</li>
<li>7 8 9</li>
</li>
</ul>

<p></p>

<h3><a name="mask_file"></a> mask_file </h3>
<p></p> 
<ul>
  <li> Type: String</li>
  <li> Range / Valid values: Max 4095 characters</li>
  <li> Default: Not defined</li>
</ul> 
<p></p>
The full path and filename for the masking pgm file.  
This picture MUST have the same width and height as the frames being 
captured and be in binary format.
If you have one or more areas of the camera image in which you do NOT want motion detected (e.g. a tree that 
moves in the wind or a corner of the picture where you can see cars/pedestrians passing by) you need a mask file. 
This file is a picture that you create in your favorite photo editing program. The areas that you want detected must 
be white. The error that you want ignored must be black. The pgm image must be the same size (number of pixels high 
and wide) as the pictures that are taken by the camera.
You can adjust sensitivity by using gray tones.
If you do not have a mask file disable this option by not having it in the config file or comment 
it out.
If you are using the <code>rotate</code> option, note that the mask is applied <em>after</em> the rotation.
<strong>Detailed Description</strong>
<p></p>
The mask file must be a pgm format image file (portable gray map). Note that you must choose the BINARY format.
<p></p>
To use this feature create an image of exact the same size as the ones you get from your camera. 
Then make it purely white for the areas you want detected and 
black for the areas you want ignored.  You can also make gray areas where 
you want to lower the sensitivity to motion. Normally you will stick to pure black and white.
<p></p>
One method for generating the mask file is as follows.
<p></p>
Take a motion captured picture, edit it with black and white for the mask and export it as a pgm file.
with a program such as gimp.

If you cannot save in this format save as a grayscale jpg and then you can convert it to pgm format with
<p></p>
<code>djpeg -grayscale -pnm [inputfile] &gt; mask.pgm</code>

<p></p>
(assuming you have djpeg installed - part of the jpeg lib package).
<p></p>
Note that the mask file option masks off the detection of motion. The entire picture is still shown on the picture. 
This means that you cannot use the feature to mask off an area that you do not want people to see.
<p></p>
Below are an example of a webcam picture and a mask file to prevent the detection cars in the street.
<p></p>
Normal picture. Notice the street is visible through the hedge.
<p></p>
<img alt="normal.jpg" src="http://www.lavrsen.dk/twiki/pub/Motion/ConfigOptionMaskFile/normal.jpg" />
<p></p>
Mask file (converted to png format so it can be shown by your web browser)
<p></p>
<table style="border-width:1px;" cellspacing="0" cellpadding="0" border="1">
 <tr >
   <td bgcolor="#ffffff" valign="top" style="vertical-align:top;" >
     <img alt="mask1.png" src="http://www.lavrsen.dk/twiki/pub/Motion/ConfigOptionMaskFile/mask1.png" />      
   </td>
 </tr>
</table>
<p></p>


<p></p>

<h3><a name="smart_mask_speed"></a> smart_mask_speed </h3>
<p></p> 
<ul>
  <li> Type: Integer</li>
  <li> Range / Valid values: 0 - 10</li>
  <li> Default: 0 (disabled)</li>
</ul> 
<p></p>
Speed for the smart mask. Default is 0 = DISABLED. 1 is slow, 10 is fast.
Smartmask is a dynamic, self-learning mask. Smartmask will disable sensitivity 
in areas with frequent motion (like trees in the wind). Sensitivity is turned 
on again after some time of no more motion in this area. The built mask is a bit 
larger at the borders than the actual motion was. This way smartmask works more 
reliable when sudden moves occur under windy conditions.
<p></p>
Fast means here that the mask is built quick, but it is also not staying very long with no more motion. 
Slow means that it takes a while until the mask is built but it also stays longer. A good start value 
for smart_mask_speed is 5. This setting is independent from the framerate. The attack and decay time 
is constant over all available framerates.
When smartmask is enabled and motion is also configured to either write motion-images or motion-mpegs, 
the current smartmask is copied as an overlay into the black/white motion-pictures/mpegs in red colour. 
Same thing happens to the webcam stream when Motion runs in <code>setup_mode</code>. That way you can 
easily adjust smart_mask_speed.
<p></p>
The <code>mask_file</code> option provides a static mask to turn off sensitivity in certain areas. 
This is very useful to mask a street with cars passing by all day long etc...
<p></p>
But imagine a scenario with large bushes and big trees where all the leaves are moving 
in the wind also triggering motion from time to time even with despeckle turned on. Of 
course you can also define a static mask here, but what if the bushes are growing during 
spring and summer? Well, you have to adapt the mask from time to time. What if the camera 
position moves slightly? What if someone grows new plants in your garden? You always have to setup a new static mask.
<p></p>
The answer to this problem is the smart mask feature A dynamic, self-learing mask.
<p></p>
Smart mask will disable sensitivity in areas with frequent motion (like trees in the wind). 
Sensitivity is turned on again after some time of no more motion in this area. The built mask 
is a bit larger at the borders than the actual motion. This way smartmask works more reliably 
when sudden moves occur under windy conditions.

<p></p>

<h3><a name="lightswitch"></a> lightswitch </h3>
<p></p> 
<ul>
  <li> Type: Integer</li>
  <li> Range / Valid values: 0 - 100</li>
  <li> Default: 0 (disabled)</li>
</ul> 
<p></p>
Ignore sudden massive light intensity changes given as a percentage of the picture area that changed intensity.
The value defines the picture areas in percent that will trigger the lightswitch condition. When lightswitch is 
detected motion detection is disabled for 5 picture frames. This is to avoid false detection when light conditions 
change and when a camera changes sensitivity at low light.
<p></p>

<h3><a name="minimum_motion_frames"></a> minimum_motion_frames </h3>
<p></p> 
<ul>
  <li> Type: Integer</li>
  <li> Range / Valid values: 1 - 1000s</li>
  <li> Default: 1</li>
</ul> 
<p></p>
Picture frames must contain motion at least the specified number of frames in a row before they are 
detected as true motion. At the default of 1, all motion is detected. Valid range is 1 to thousands, 
but it is recommended to keep it within 1-5.
Note that the picture frames are buffered by Motion and once motion is detected also the first frames 
containing motion are saved so you will not miss anything.
The feature is used when you get many false detections when the camera changes light sensitivity or light changes.
Even though Motion accepts large values you should set this to a relatively low number 
(below 10). For each step larger than 1 Motion reserves space in RAM for the picture frame buffer. If you have a 
large value Motion will miss many frames from the camera while it is processing the all the pictures in the buffer.

<p></p>

<h3><a name="event_gap"></a> event_gap </h3>
<p></p> 
<ul>
  <li> Type: Integer</li>
  <li> Range / Valid values: 0 - 2147483647</li>
  <li> Default: 60</li>
</ul> 
<p></p>
The seconds of no motion detection that triggers the end of an event. 
An event is defined as a series of motion images taken within a short timeframe.
The value -1 is allowed and disables
 events causing all Motion to be written to one single movie file and no pre_capture.
 If set to 0, motion is running in gapless mode. Movies don't have gaps anymore. An
 event ends right after no more motion is detected and post_capture is over.

Disabling events has bad side effects on 
noise_tune and smartmask. Both features can only work properly outside an event. 
When event_gap is set to -1, both features don't work properly anymore.
An event is defined as a series of motion images taken within a short timeframe. 
E.g. a person walking through the room is an event that may have caused 10 single 
jpg images to be stored. This option defines how long a pause between detected motions 
that is needed to be defined as a new event.
The timer starts after the last motion is detected and post_capture images 
have been saved and appended to open movie files.
Any motion detected before the gap timer times out resets the gap timer so it starts counting over again.
The option 'event_gap' is important. It defines how long a period of no motion detected it takes before we say an event is over. An event is defined as a series of motion images taken within a short timeframe. E.g. a person walking through the room is an event that may have caused 10 single jpg images to be stored. Motion detected includes post_captured frames set by the 'post_capture' option. The 'gap' option defines how long a pause between detected motions that is needed to be defined as a new event. A good starting value is 60 seconds.
The way 'gap' works in more technical terms is: 
<ul>
  <li> A timer that timeouts 'event_gap' seconds after the last video frame with motion is detected.</li>
  <li> If 'post_capture' is activated then the gap timer starts counting after the last image of the post_capture buffer has been saved.</li> 
  <li> The gap timer is reset and starts all over each time new motion is detected, so you will not miss any action by having a short 'gap' value. It will just create more events (e.g. more mpegs files)</li>
</ul>
The gap value impacts many functions in Motion. 
<ul>
  <li> When the timer runs out the event number is increased by one next time motion is detected. 
       When you use the %v conversion specifier in filenames or text features this means that the 
       number in filename or text increased by one.</li>
  <li> The pre_capture feature only works at the beginning of an event. So if you have a very large 'event_gap' 
       value pre_capture is not working very often.</li>
  <li> When you make movies using the ffmpeg features a new movie file is started at the beginning of an event 
       when the first motion is detected. When 'event_gap' seconds has passed without motion (and post_captured frames 
       saved) the movie files are completed and closed.</li>
  <li> Do not use large event_gap values to generate one large movie file. 
       If Motion stops working this movie file never gets properly completed and closed 
       you will not be able to view it.</li>
  <li> Some of the tracking features sets the camera back to the center position when an event is over.</li>
</ul>
 
Note that 'event_gap' and 'minimum_gap' have nothing to do with each other. 
<p></p>
<p></p>
</ul>

<h2><a name="Options_Scripts"></a> Script Execution </h2>
<ul>
<p></p>
Motion can execute external commands based on the motion detection and related events. 
They are described in the sections below.  
<p></p>
<strong>Security Warning!</strong> 
<p></p> 
These features mean you have to pay attention to the following. 
<ul>
<li> Anyone with access to the remote control port (http) can execute any command on your computer with 
the same privileges as the user running Motion. 
Anyone can access your control port if you have not either limited access to localhost or 
limited access using firewalls in the server. 
You should always have a router between a machine running Motion with remote control 
enabled and the Internet and make sure the Motion control port is not accessible from the outside.
</li> 
<li> If you limit control port to localhost you still need to take care of any user logging into the server 
with any kind of GUI or terminal session. All it takes is a browser or single command line execution to 
change settings in Motion.
</li> 
<li> It is a good idea to run Motion as a harmless user. Not as root!!</li>
</ul> 
<p></p>
  
<p></p>
<p></p>

<h3><a name="on_event_start"></a> on_event_start </h3>
<p></p> 
<ul>
  <li> Type: String</li>
  <li> Range / Valid values: Max 4095 characters</li>
  <li> Default: Default: Not defined</li>
</ul> 
<p></p>
The full path and file name of the program/script to be executed at the start of an event. 
An event starts at first motion detected after a 
period of no motion defined by gap. 
<p></p>
You can use <a href="#conversion_specifiers">Conversion Specifiers</a> 
and spaces as part of the command.  This can be any type of program or script. 
Remember to set the execution bit in the ACL and if it is a script type program such as perl or bash 
also remember the shebang line (e.g. #!/user/bin/perl) as the first line of the script.
<p></p>
<p></p>

<h3><a name="on_event_end"></a> on_event_end </h3>
<p></p> 
<ul>
  <li> Type: String</li>
  <li> Range / Valid values: Max 4095 characters</li>
  <li> Default: Not defined</li>
</ul> 
<p></p>
The full path and file name of the program/script to be executed when a event ends.   
An event ends after the event_gap has expired.  
<p></p>
You can use <a href="#conversion_specifiers">Conversion Specifiers</a> 
and spaces as part of the command.  This can be any type of program or script. 
Remember to set the execution bit in the ACL and if it is a script type program such as perl or bash 
also remember the shebang line (e.g. #!/user/bin/perl) as the first line of the script.
<p></p>
<p></p>

<h3><a name="on_picture_save"></a> on_picture_save </h3>
<p></p> 
<ul>
  <li> Type: String</li>
  <li> Range / Valid values: Max 4095 characters</li>
  <li> Default: Not defined</li>
</ul> 
<p></p>
The full path and file name of the program/script to be executed when a picture is saved.   
<p></p>
You can use <a href="#conversion_specifiers">Conversion Specifiers</a> 
and spaces as part of the command.  This can be any type of program or script. 
Remember to set the execution bit in the ACL and if it is a script type program such as perl or bash 
also remember the shebang line (e.g. #!/user/bin/perl) as the first line of the script.
<p></p>
Use %f for passing filename (with full path) to the command.
<p></p>
<p></p>

<h3><a name="on_motion_detected"></a> on_motion_detected </h3>
<p></p> 
<ul>
  <li> Type: String</li>
  <li> Range / Valid values: Max 4095 characters</li>
  <li> Default: Not defined</li>
</ul> 
<p></p>
The full path and file name of the program/script to be executed when motion is detected.     
<p></p>
You can use <a href="#conversion_specifiers">Conversion Specifiers</a> 
and spaces as part of the command.  This can be any type of program or script. 
Remember to set the execution bit in the ACL and if it is a script type program such as perl or bash 
also remember the shebang line (e.g. #!/user/bin/perl) as the first line of the script.
<p></p>
<p></p>

<h3><a name="on_area_detected"></a> on_area_detected </h3>
<p></p> 
<ul>
  <li> Type: String</li>
  <li> Range / Valid values: Max 4095 characters</li>
  <li> Default: </li>
</ul> 
<p></p>
The full path and file name of the program/script to be executed when motion is 
detected in the predefined area indicated in the area_detect option.   
<p></p>     
You can use <a href="#conversion_specifiers">Conversion Specifiers</a> 
and spaces as part of the command.  This can be any type of program or script. 
Remember to set the execution bit in the ACL and if it is a script type program such as perl or bash 
also remember the shebang line (e.g. #!/user/bin/perl) as the first line of the script.
<p></p>
<p></p>

<h3><a name="on_movie_start"></a> on_movie_start </h3>
<p></p> 
<ul>
  <li> Type: String</li>
  <li> Range / Valid values: Max 4095 characters</li>
  <li> Default: Not defined</li>
</ul> 
<p></p>
The full path and file name of the program/script to be executed when a 
new movie is being created.
<p></p>       
You can use <a href="#conversion_specifiers">Conversion Specifiers</a> 
and spaces as part of the command.  This can be any type of program or script. 
Remember to set the execution bit in the ACL and if it is a script type program such as perl or bash 
also remember the shebang line (e.g. #!/user/bin/perl) as the first line of the script.
<p></p>
Use %f for passing filename (with full path) to the command.
<p></p>
<p></p>

<h3><a name="on_movie_end"></a> on_movie_end </h3>
<p></p> 
<ul>
  <li> Type: String</li>
  <li> Range / Valid values: Max 4095 characters</li>
  <li> Default: Not defined</li>
</ul> 
<p></p>
<p></p>
The full path and file name of the program/script to be executed after a new 
movie was created.
<p></p>       
You can use <a href="#conversion_specifiers">Conversion Specifiers</a> 
and spaces as part of the command.  This can be any type of program or script. 
Remember to set the execution bit in the ACL and if it is a script type program such as perl or bash 
also remember the shebang line (e.g. #!/user/bin/perl) as the first line of the script.
<p></p>
Use %f for passing filename (with full path) to the command.
<p></p>
<p></p>

<h3><a name="on_camera_lost"></a> on_camera_lost </h3>
<p></p> 
<ul>
  <li> Type: String</li>
  <li> Range / Valid values: Max 4095 characters</li>
  <li> Default: </li>
</ul> 
<p></p>
The full path and file name of the command to be executed when a camera can't be opened or if it is lost
Note that there are situations when motion doesn't detect a lost camera.  It is 
dependent upon the camera and driver and it is advised that this option be tested
for each configuration.  It has also been observed that there are also 
situations in which the disconnection of the camera even hangs the PC in which 
case this script will not be executed.  
<p></p>       
You can use <a href="#conversion_specifiers">Conversion Specifiers</a> 
and spaces as part of the command.  This can be any type of program or script. 
Remember to set the execution bit in the ACL and if it is a script type program such as perl or bash 
also remember the shebang line (e.g. #!/user/bin/perl) as the first line of the script.
<p></p>
<p></p>

</ul>

<h2><a name="Options_Output_General"></a><strong>Output - General Options</strong></h2>
<ul>

<p></p>
<h3><a name="quiet"></a> quiet </h3>
<p></p> 
<ul>
  <li> Type: Boolean</li>
  <li> Range / Valid values: on, off</li>
  <li> Default: off</li>
</ul> 
<p></p>
Be quiet, don't output beeps when detecting motion.
Only works in non-daemon mode.
<p></p>
<p></p>

<h3><a name="pre_capture"></a> pre_capture </h3>
<p></p> 
<ul>
  <li> Type: Integer</li>
  <li> Range / Valid values: 0 - 100s</li>
  <li> Default: 0 (disabled)</li>
</ul> 
<p></p>
Specifies the number of pre-captured (buffered) pictures from before motion
was detected that will be output at motion detection.
The recommended range is 0 to 5.  It is not recommended to use large values.
Large values will cause Motion to skip video frames and cause unsmooth movies. 
To smooth movies use larger values of post_capture instead.
<p></p>
Motion buffers the number of picture frames defined by 'pre_capture'. When motion is detected the pictures in the 
buffer are included in the movie.  The effect is that it seems the program knew in advance 
that the event was going to take place and started the recording before it actually happened. 
This is a nice feature that give more complete video clips of an event.
<p></p>
If pre_capture is set to 0 the feature is disabled. The recommended value would be approx 0.5 second of 
video so the value should be defined so it fits the framerate and the desired pre-capture time. 
You can in theory have up to 100s of pre-captured frames but naturally this makes motion leave a larger footprint in 
the memory of the computer. 
<p></p>
More important Motion is processing all the buffered images including saving jpegs, 
encoding the movie, writing to databases and executing external programs after the first image is detected as Motion.
<p></p>
Motion will not grab another image until this is done. This means that even moderate values for pre_capture combined 
with high framerates will mean that you will probably miss many frames of Motion. 
<p></p>
It is therefore recommended to use relatively small values for pre_capture. 
Depending on your chosen framerate and depending on the features enabled values from 1-5 are sensible.
<p></p>
If you wish to create a smooth movie during events using large pre_capture values will do the opposite! It will create 
a long pause where a lot of action is missed.
<p></p>
To get a smooth movie use a large value for <code>post_capture</code> which does not cost any performance hit or RAM 
space.
<p></p>
<p></p>

<h3><a name="post_capture"></a> post_capture </h3>
<p></p> 
<ul>
  <li> Type: Integer</li>
  <li> Range / Valid values: 0 - 2147483647</li>
  <li> Default: 0 (disabled)</li>
</ul> 
<p></p>
Specifies the number of frames to be captured after motion has been detected.
The purpose of this is mainly to create smooth video clips each time motion is detected. Use it to you personal 
taste (and disk space)..
This option is the preferred way to create continuous movies. Post_capture does not consume extra RAM and it 
does not create pauses in the movie even with large values.
If you only store movies and do not have output_normal on, then the recommended post_capture value is what is 
equivalent to 1-5 seconds of movie.
<p></p>
<p></p>

<h3><a name="target_dir"></a> target_dir </h3>
<p></p> 
<ul>
  <li> Type: String</li>
  <li> Range / Valid values: Max 4095 characters</li>
  <li> Default: Not defined = current working directory</li>
</ul> 
<p></p>
The full path for the target directory for picture and movie files to be saved.  
The default is the current working directory. This is the target directory for all snapshots, 
images files and movie files. 
You will normally always want to specify this parameter as an absolute path.
<p></p>
Note that the file name options are all saved relative to this target_dir
This means in principle that you can specify target_dir as '/' and be 100% flexible. But this is
NOT recommended.  It is recommended that this directory be specified as deep as possible. 
<p></p>
<p></p>

</ul>

<h2> <strong><a name="Options_Pictures"></a> Output - Picture Options </strong></h2>
<ul>

<p></p>
Motion can output different types of pictures.  The normal picture is indicated below.
<p></p>
<img alt="outputnormal1.jpg" src="http://www.lavrsen.dk/twiki/pub/Motion/TuningMotion/outputnormal1.jpg" />
<p></p>
The motion type picture or also referred to as a debug picture is shown 
below.  Note that the largest area is blue and only this is counted as Motion.
<p></p>
The Motion image shows how Motion maintains a "reference frame" which is not just the last picture frame 
but a mathematical calculation of the past images. This enlarges real Motion and ensures that it is not easy to 
sneak in slowly.
<p></p>
<img alt="outputmotion1.jpg" src="http://www.lavrsen.dk/twiki/pub/Motion/TuningMotion/outputmotion1.jpg" />
<p></p>
<p></p>


<h3><a name="output_pictures"></a> output_pictures </h3>
<p></p> 
<ul>
  <li> Type: Discrete Strings</li>
  <li> Range / Valid values: on, off, first, best</li>
  <li> Default: on</li>
</ul> 
<p></p>
This option controls the output of the normal image.
<p></p>
'on' is the usual selection.
<p></p>  
If you set the value to 'first' Motion saves only the first motion detected picture per event.
If you set it to "best" Motion saves the picture with most changed pixels during the event. 
This may be useful if you store movies on a server and want to present a jpeg to show the content of the movie 
on a webpage. 
<p></p>
"best" requires a little more CPU power and resources compared to "first".
<p></p>
'off' to don't write pictures
<p></p>
<p></p>

<h3><a name="output_debug_pictures"></a> output_debug_pictures </h3>
<p></p> 
<ul>
  <li> Type: Boolean</li>
  <li> Range / Valid values: on, off</li>
  <li> Default: off</li>
</ul> 
<p></p>
Output pictures with only the moving object. 
This feature generates the special motion type movies where you only see the pixels that 
changes as a graytone image. If labelling is enabled you see the largest area in blue.
<p></p> 
If a Smartmask is specified, it is shown in red.
<p></p>
Motion images shows the motion content of the pictures. 
This is good for tuning and testing but probably not very interesting for the general public.
<p></p>
Default is not to store these motion images. 
Motion pictures are stored the same place and with the same filename as normal motion 
triggered pictures except they have an "m" appended at the end of the filename before 
the .jpg or .ppm. E.g. the name can be 01-20020424232936-00m.jpg.
<p></p>
<p></p>

<h3><a name="quality"></a> quality </h3>
<p></p> 
<ul>
  <li> Type: Integer</li>
  <li> Range / Valid values: 1 - 100</li>
  <li> Default: 75</li>
</ul> 
<p></p>
The quality for the jpeg images in percent.
100 means hardly compressed. A small number means a much smaller file size but also a less nice 
quality image to look at. 
<p></p>
<p></p>

<h3><a name="picture_type"></a> picture_type </h3>
<p></p> 
<ul>
  <li> Type: String</li>
  <li> Range / Valid values: Max 4095 characters</li>
  <li> Default: </li>
</ul> 
<p></p>
This option specifies the type of picture file to output.  The recommendation is to always use jpg except 
if you have a specific need to store high quality pictures without any quality loss. 
<p></p>
<p></p>

<h3><a name="snapshot_interval"></a> snapshot_interval </h3>
<p></p> 
<ul>
  <li> Type: Integer</li>
  <li> Range / Valid values: 0 - 2147483647</li>
  <li> Default: 0 (disabled)</li>
</ul> 
<p></p>
This parameter specifies the number of seconds between each snapshot 
<p></p>
<p></p>

<h3><a name="snapshot_filename"></a> snapshot_filename </h3>
<p></p> 
<ul>
  <li> Type: String</li>
  <li> Range / Valid values: Max 4095 characters</li>
  <li> Default: %v-%Y%m%d%H%M%S-snapshot</li>
</ul> 
<p></p>
This option indicates the file name and optionally the path for the snapshots (jpeg or ppm) relative to target_dir.
<p></p>
The file extension .jpg or .ppm is automatically added. 
<p></p>
A symbolic link called lastsnap.jpg (or lastsnap.ppm) is created in the target_dir and will always 
point to the latest snapshot, unless snapshot_filename is exactly 'lastsnap'
<p></p>     
You can use <a href="#conversion_specifiers">Conversion Specifiers</a> in this option.
<p></p>
<p></p>

<h3><a name="picture_filename"></a> picture_filename </h3>
<p></p> 
<ul>
  <li> Type: String</li>
  <li> Range / Valid values: Max 4095 characters</li>
  <li> Default: %v-%Y%m%d%H%M%S-%q</li>
</ul> 
<p></p>
This option indicates the file name and optionally the path for the pictures (jpeg or ppm) relative to target_dir.
<p></p>
The file extension .jpg or .ppm is automatically added. 
<p></p>
You can use <a href="#conversion_specifiers">Conversion Specifiers</a> in this option.
<p></p>
<p></p>

<h3><a name="exif_text"></a> exif_text </h3>
<p></p> 
<ul>
  <li> Type: String</li>
  <li> Range / Valid values: Max 4095 characters</li>
  <li> Default: </li>
</ul> 
<p></p>
Use this option to specify the text to include in a JPEG EXIF comment
The EXIF timestamp is included independent of this text.
<p></p>
You can use <a href="#conversion_specifiers">Conversion Specifiers</a> in this option.
<p></p>
<p></p>
</ul>

<h2><a name="Options_Movies"></a><strong>Output - Movie Options</strong></h2>
<ul>
<p></p>
<h3><a name="max_movie_time"></a> max_movie_time </h3>
<p></p> 
<ul>
  <li> Type: Integer</li>
  <li> Range / Valid values: 0 (infinite) - 2147483647</li>
  <li> Default: 3600</li>
</ul> 
<p></p>
The maximum length of a movie in seconds. Set this to zero for unlimited length.
<p></p>
<p></p>

<h3><a name="ffmpeg_output_movies"></a> ffmpeg_output_movies </h3>
<p></p> 
<ul>
  <li> Type: Boolean</li>
  <li> Range / Valid values: on, off</li>
  <li> Default: off</li>
</ul> 
<p></p>
Use ffmpeg libraries to encode movies of the motion.  This option
generates a new movie at the beginning of each new event and appends to the 
movie for each motion detected within the same event. 
The current event ends when the time defined by the 'event_gap' option has passed with no motion detected. 
At the next detection of motion a new movie is started.
<p></p>
To use this feature you need to install ffmpeg or Libav.
<p></p>
<p></p>

<h3><a name="ffmpeg_output_debug_movies"></a> ffmpeg_output_debug_movies </h3>
<p></p> 
<ul>
  <li> Type: Boolean</li>
  <li> Range / Valid values: on, off</li>
  <li> Default: off</li>
</ul> 
<p></p>
Use ffmpeg libraries to encode motion type movies where you only see the pixels that changes.
Works like ffmpeg_output_movies but outputs motion pixel type pictures instead.
This feature generates the special motion type movie where you only see the pixels 
that changes as a graytone image. If labeling is enabled you see the largest area in blue. 
Smartmask is shown in red. The filename given is the same as the normal movies except they 
have an 'm' appended after the filename.
<p></p>
<p></p>

<h3><a name="ffmpeg_timelapse"></a> ffmpeg_timelapse </h3>
<p></p> 
<ul>
  <li> Type: Boolean</li>
  <li> Range / Valid values: 0 - 2147483647</li>
  <li> Default: 0 (disabled)</li>
</ul> 
<p></p>
Create a timelapse movie saving a picture frame at the interval in seconds set by this parameter. 
<p></p>
<p></p>

<h3><a name="ffmpeg_timelapse_mode"></a> ffmpeg_timelapse_mode </h3>
<p></p> 
<ul>
  <li> Type: Discrete Strings</li>
  <li> Range / Valid values: hourly, daily, weekly-sunday, weekly-monday, monthly, manual</li>
  <li> Default: daily</li>
</ul> 
<p></p>
The file rollover mode of the timelapse video.
Note that it is important that you use the conversion specifiers in ffmpeg_filename that ensure that 
the new timelapse file indeed is a new file. If the filename does not change Motion will simply append 
the timelapse pictures to the existing file.
The value 'Manual' means that Motion does not automatically rollover to a new filename. You can do it 
manually using the http control interface by setting the option 'ffmpeg_timelapse' to 0 and then back 
to your chosen value. Value 'hourly' rolls over on the full hour. Value 'daily' which is the default 
rolls over at midnight. There are two weekly options because depending on where you come from a week 
may either start on Sunday or Monday. And 'monthly' naturally rolls over on the 1st of the month.
<p></p>
<p></p>

<h3><a name="ffmpeg_bps"></a> ffmpeg_bps </h3>
<p></p> 
<ul>
  <li> Type: Integer</li>
  <li> Range / Valid values: 0 - 9999999</li>
  <li> Default: 400000</li>
</ul> 
<p></p>
Bitrate of movies produced by ffmpeg. Bitrate is bits per second. 
Higher value mans better quality and larger files if the camera is on a fixed bitrate setting.
Experiment to get the desired quality. The better quality the bigger files. 
This option is ignored if ffmpeg_variable_bitrate is not 0 (disabled).
<p></p>
<p></p>

<h3><a name="ffmpeg_variable_bitrate"></a> ffmpeg_variable_bitrate </h3>
<p></p> 
<ul>
  <li> Type: Integer</li>
  <li> Range / Valid values: 0, 2 - 31</li>
  <li> Default: 0 (disabled)</li>
</ul> 
<p></p>
Enables and defines variable bitrate for the ffmpeg encoder. 
The option of ffmpeg_bps is ignored if variable bitrate is enabled. 
A value of 0 disables this option while values 2 - 31 are applicable when a 
variable bit rate is desired.  The value of 2 means best quality and 31 is worst.
<p></p>
Experiment for the value that gives you the desired compromise between size and quality.
<p></p>
<p></p>

<h3><a name="ffmpeg_video_codec"></a> ffmpeg_video_codec </h3>
<p></p> 
<ul>
  <li> Type: Discrete Strings</li>
  <li> Range / Valid values: mpeg1, mpeg4, msmpeg4, swf, flv, ffv1</li>
  <li> Default: mpeg4</li>
</ul> 
<p></p>
Codec to be used by ffmpeg for the video compression. 
<p></p>
Timelapse videos have two options.
<ul>
<li>swf - Creates swf file with mpeg-2 encoding. If motion is shutdown and restarted, new pics will be appended
     to any previously created file with name indicated for timelapse.</li>
<li>mpeg4 - Creates avi file with the default encoding.  If motion is shutdown and restarted, new pics will 
create a new file with the name indicated for timelapse.</li>
</ul>
<p></p>
Movie files have the following options 
<ul>
<li>mpeg4 or msmpeg4 - gives you files with extension .avi</li>
<li>swf - gives you a flash film with extension .swf</li>
<li>flv - gives you a flash video with extension .flv </li>
<li>ffv1 - FF video codec 1 for Lossless Encoding </li>
<li>mov - QuickTime </li>
<li>ogg - Ogg/Theora </li>
<li>mp4 - MPEG-4 Part 14 H264 encoding</li>
<li>mkv - Matroska H264 encoding</li>
<li>hevc - H.265 / HEVC (High Efficiency Video Coding)</li>
</ul>  

<p></p>
<p></p>

<h3><a name="ffmpeg_duplicate_frames"></a> ffmpeg_duplicate_frames </h3>
<p></p> 
<ul>
  <li> Type: String</li>
  <li> Range / Valid values: Max 4095 characters</li>
  <li> Default: </li>
</ul> 
<p></p>
If the CPU can not keep up with the requested frame rate for the movies, should frames be 
duplicated in order to keep up or should it be skipped.
<p></p>
<p></p>

<h3><a name="movie_filename"></a> movie_filename </h3>
<p></p> 
<ul>
  <li> Type: String</li>
  <li> Range / Valid values: Max 4095 characters</li>
  <li> Default: %v-%Y%m%d%H%M%S</li>
</ul> 
<p></p>
File path for motion triggered movies relative to target_dir. Note that the file 
extension is automatically added to the name based upon the codec selected.
<p></p>
You can use <a href="#conversion_specifiers">Conversion Specifiers</a> in this option.
<p></p>
<p></p>


<h3><a name="timelapse_filename"></a> timelapse_filename </h3>
<p></p> 
<ul>
  <li> Type: String</li>
  <li> Range / Valid values: Max 4095 characters</li>
  <li> Default: %v-%Y%m%d-timelapse</li>
</ul> 
<p></p>
File path for the timelapse movies relative to target_dir. Note that the file 
extension is automatically added to the name based upon the codec selected.
<p></p>
You can use <a href="#conversion_specifiers">Conversion Specifiers</a> in this option.
<p></p>
<p></p>
</ul>

<h2><a name="Options_Pipe"></a><strong>Output - Pipe Options</strong></h2>
<ul>

<p></p>
The video4linux driver is written by the same author that first created Motion. You can 
find the source and a brief description at the 
<a href="http://www.lavrsen.dk/twiki/bin/view/Motion/VideoFourLinuxLoopbackDevice" class="twikiLink">video4linux loopback device web page</a>. 
<p></p>
The video4linux device is a Kernel module which installs itself as a video pipe. 
It has an input and an output. The module simply takes anything that comes on its input 
and send it out at the output. The purpose of this is to create a standard video4linux type video 
device that other programs can then use. You may now ask: "What do I need that for?".
<p></p>
Only one program can access a video device at a time. When motion is using a camera - 
no other program can access the same camera. But motion is made to be able to feed a video signal 
to the video loopback device. This way an additional program can watch the signal from a camera that 
motion uses already. What you see is not the live camera stream but the exact same picture that motion 
uses for detecting motion and the same pictures that are saved/streamed. You can also choose to 
see the "motion" type images where you see the pixels that are changing - live. 
<p></p>
When you install the video loopback device it will create an input - 
for example /dev/video5 and an output - for example /dev/video6. You can then tell motion to "pipe" 
the video signal to the /dev/video5 and look at the pictures live using e.g. Camstream on /dev/video6. 
Camstream is "fooled" to think it is looking at a real camera.
<p></p>
<strong>Installing</strong>
<p></p>
Installing the video loopback device is not difficult. At least not when you have this document available.
<p></p>
First you must prepare your system for more video devices. You will need two extra devices for each video 
pipe that you want.
<p></p>
For example if you have 4 cameras they will probably run at 
/dev/video0, /dev/video1, /dev/video2, and /dev/video3. So you will need additional 8 video devices. 
This is easy to do.
<p></p>
<pre>
mknod /dev/video4 c 81 4
mknod /dev/video5 c 81 5
mknod /dev/video6 c 81 6
mknod /dev/video7 c 81 7
mknod /dev/video8 c 81 8
mknod /dev/video9 c 81 9
mknod /dev/video10 c 81 10
mknod /dev/video11 c 81 11
</pre>
<p></p>
Note that the video device number is the same as the last parameter given on each line.
<p></p>
You may need to set the ownership and permissions (chown and chmod) to be the same as the video devices 
that were already there.
<p></p>
Now you need to install the video loopback device.
<p></p>
Download the latest 
<a href="http://www.lavrsen.dk/twiki/bin/view/Motion/VideoFourLinuxLoopbackDevice" target="_top">video4linux loopback device</a> . 
Place the file in a place of your own choice. 
<p></p>
Untar and uncompress the file to the place you want the program installed. Editor recommends /usr/local/vloopback.
<p></p>
<code>cd /usr/local</code>
<p></p>
<code>tar -xvzf /path/to/vloopback-1.1-rc1.tar.gz</code>
<p></p>
You now have a directory called vloopback-1.1-rc1. You can rename it to vloopback (mv vloopback-1.1-rc1 vloopback). 
I recommend creating a symbolic link to the current version. This way you can more easily experiment with different 
versions simply by changing the link.
<p></p>
<code>ln -s vloopback-1.1-rc1 vloopback</code>
<p></p>
Now change to the new directory
<p></p>
<code>cd vloopback</code>
<p></p>
Build the code
<p></p>
<code>make</code>
<p></p>
There is a good chance that the make will not work and give you a long list of errors. 
To run make the following must be available on you machine. <ul>
<li> The kernel source files must be installed. 
</li> <li> The source files must be available at /usr/src/linux.<br />E.g. 
the new Red Hat 7.3 does not have a link to the sources called linux. Instead there is a link 
called linux-2.4. This is easy to fix. Just create a link to the real source tree. Do not rename! 
Add a link using this command (replacing the kernel version number with the one you have on your 
machine)<br /> <code>ln -s /usr/src/linux-2.4.18-4 /usr/src/linux</code>
</li> <li> Alternatively you can change the vloopback makefile so that the "LINUXSRC=/usr/src/linux" line is 
changed to the actual path. I recommend the link solution since this may solve other similar problems that you 
can get when installing other software. 
</li></ul> 
<p></p>
When compiling on a newer Linux distribution you may get a warning about a header file malloc.h. 
To remove this warning simply change the header reference as suggested by the warning.
<p></p>
In vloopback.c you replace the line
<p></p>
<code>#include &lt;linux/malloc.h&gt;</code>
<p></p>
with the line
<p></p>
<code>#include &lt;linux/slab.h&gt;</code>
<p></p>
Install the code you built as a Kernel module. There are two options: 
pipes should be set to the number of video loopbacks that you want. Probably one for each camera. 
The dev_offset defines which video device number will be the first. If dev_offset is not defined the 
vloopback module will install itself from the first available video device. If you want the cameras to be 
assigned to the lower video device numbers you must either load vloopback after loading the video device 
modules OR use the dev_offset option when loading vloopback. Vloopback then installs itself in the sequence 
input 0, output 0, input 1, output 1, input 2, output 2 etc. Here is shown the command for our example of 4 
cameras and 4 loopback devices and the first loopback device offset to /dev/video4.
<p></p>
<code>/sbin/insmod /usr/local/vloopback/vloopback.o pipes=4 dev_offset=4</code>
<p></p>
When you run the command you may get a warning about tainting the Kernel. Just ignore this.
You can choose to copy the vloopback.o file into a directory in the /lib/modules tree where the insmod/modprobe programs are already looking for modules. Then the command gets simpler (/sbin/insmod vloopback pipes=.....).
<p></p>
If you want the loopback device to load during boot, you can place the call in one of the bootup scripts such as /etc/rc.d/rc.local. Vloopback should be loaded before you start motion. 
<p></p>
To activate the vloopback device in motion set the 'video_pipe' option in the motion.conf file. You can also view the special motion pictures where you see the changed pixels by setting the option 'motion_video_pipe' in motion.conf. When setting the video_pipe and/or motion_video_pipe options either specify the input device as e.g. /dev/video4. You can also set the parameter to '-' which means that motion will find the first vacant video loopback device input. If you have more than one camera you may want to control which loopback device each thread uses. Then you need to define the specific device name in motion.conf for the first camera and in each thread config file for the other cameras. If you set the video_pipe parameter to '-' in the motion.conf file and not setting it in the thread config files, motion automatically assign video devices in the same sequence as the threads are loaded. You can combine both video_pipe and motion_video_pipe but then naturally you will need twice as many pipes. 
<p></p>
De-activating should be done with this command
<p></p>
<code>/sbin/modprobe -r vloopback</code>
<p></p>
<p></p>



<h3><a name="video_pipe"></a> video_pipe </h3>
<p></p> 
<ul>
  <li> Type: String</li>
  <li> Range / Valid values: Max 4095 characters</li>
  <li> Default: </li>
</ul>
<p></p>
if a dash '-' is given motion will use /proc/video/vloopback/vloopbacks to locate a free pipe. Default: not set
The video4linux video loopback input device for normal images. If a particular pipe is to be used then use the 
device filename of this pipe. If a dash '-' is given motion will use /proc/video/vloopback/vloopbacks to locate 
a free pipe.
<p></p>
<p></p>

<h3><a name="motion_video_pipe"></a> motion_video_pipe </h3>
<p></p> <ul>
<li> Type: String
</li> <li> Range / Valid values: Max 4095 characters
</li> <li> Default: Not defined
</li> <li> <a href="http://www.lavrsen.dk/twiki/bin/view/Motion/ConfigOptionMotionVideoPipe" class="twikiLink">Option Topic</a>
</li></ul> 
<p></p>
The video4linux video loopback input device for motion images. 
If a particular pipe is to be used then use the device filename of this pipe, 
if a dash '-' is given motion will use /proc/video/vloopback/vloopbacks to locate a free pipe. Default: not set
<p></p>
<p></p>

<h3><a name="use_extpipe"></a> use_extpipe </h3>
<p></p> 
<ul>
  <li> Type: String</li>
  <li> Range / Valid values: Max 4095 characters</li>
  <li> Default: </li>
</ul> 
<p></p>
This option specifies whether to send the output to a 
pipe for external encoding into a movie. 
<p></p>
Note that this option does not require the install or configure of the videoloop back
<p></p>
<p></p>


<h3><a name="extpipe"></a> extpipe </h3>
<p></p> 
<ul>
  <li> Type: String</li>
  <li> Range / Valid values: Max 4095 characters</li>
  <li> Default: </li>
</ul> 
<p></p>
This option specifies the program name and options for the 
program that will receive and process the images during a movie event.
<p></p>
Note that this option does not require the install or configure of the videoloop back
<p></p>
Sample:
<p></p>
extpipe mencoder -demuxer rawvideo -rawvideo w=320:h=240:i420 -ovc x264 -x264encopts bframes=4:frameref=1:subq=1:scenecut=-1:nob_adapt:threads=1:keyint=1000:8x8dct:vbv_bufsize=4000:crf=24:partitions=i8x8,i4x4:vbv_maxrate=800:no-chroma-me -vf denoise3d=16:12:48:4,pp=lb -of   avi -o %f.avi - -fps %fps

<p></p>
<p></p>


</ul>

<h2><a name="Options_Stream_Webcontrol"></a> Steam and Webcontrol</a> </h2>
<ul>

Motion has simple webcam server built in. The server can be configured to 
stream both the images as well allow for a very basic http control of these Motion parameters.
<p></p>
Each thread can have its own stream  and it is enabled by specifying 
the port number.  If there are multiple cameras, each camera must have 
its own unique port number.  
<p></p>
The webserver generates a stream in "multipart jpeg" format (mjpeg). Some browsers can not display
images fed in this method.  Alternatives are being considered for implementation within Motion to resolve 
this limitation.    The most straight forward around this limitation is to create a local 
HTML page that references the raw stream.  

<p></p>
Open up a text editor and paste in the following.
<code>
&lt;html&gt;
&lt;body bgcolor=000000&gt;
&lt;img src=http://yourmotionpc:yourstreamport/ border="0" width=25%&gt;&lt;/a&gt;
&lt;/body&gt;
&lt;/html&gt;
</code>
<p></p>
Change the yourmotionpc with the IP or name of the computer running Motion.  Also revise the port
number to be the one referenced for the stream.
<p></p>  
Save the file and then open it in your browser.
<p></p>
<p></p>
It may also be possible to view the stream via regular stream players such as VLC, mplayer, ffplay, avplay, etc. 
by specifying the network stream as 
<code>
http://localhost:myportnumber/stream.mjpg
</code>
<p></p>
<p></p>

<p></p>
Motion can be remote controlled via a simple http interface. 
<p></p>
Most Motion configuration options can be changed while Motion is running except 
options related to the size of the captured images and mask files which 
are loaded only when Motion starts. 
<p></p>
The most obvious tool to use to remote control Motion is any web browser. 
All commands are sent using the http GET method which simply means that the information is 
sent via the URL and maybe a query string. You can use any browser (Firefox, Mozilla, Internet Explorer
, etc). You can also use the text based browser lynx to control Motion from a console. 
It navigates fine through the very simple and minimalistic http control interface of Motion.
<p></p>
<p></p>
But it is probably simpler to connect to the control port with a browser, navigate to the function 
you want, and copy the URL from the browser URL entry line. 
If your <code>webcontrol_port</code> is 8080 and you browse from the same machine 
on which Motion runs simply look up 
<a href="http://localhost:8080/" rel="nofollow" target="_top">http://localhost:8080/</a> and navigate around. 
Connecting from a remote machine is done by using a domain name (example
 <a href="http://mydomain.com:8080/" rel="nofollow" target="_top">http://mydomain.com:8080/</a>) or the 
 IP address of the machine (example 
 <a href="http://192.168.1.4:8080/" rel="nofollow" target="_top">http://192.168.1.4:8080/</a>). 
 The option <code>webcontrol_localhost</code> must be off to allow connection from a remote machine.
<p></p>
If you want to use a script or cron to automatically change Motion settings while Motion runs you use a 
program that can fetch a webpage. We simply just throw away the html page that Motion returns. Programs 
commonly available on Linux machines are wget and lwp-request. Here is an example of how to start and 
stop motion detection via cron. These two lines are added to /etc/crontab.
<p></p>
<pre>
0 9 &#42; &#42; &#42; root /usr/bin/lwp-request http://localhost:8080/0/detection/start &#62; /dev/null
0 18 &#42; &#42; &#42; root /usr/bin/lwp-request http://localhost:8080/0/detection/pause &#62; /dev/null
</pre>
<p></p>
If you want to use the http remote control from your own software (for example your own PHP front end) 
you can set the new motion.conf option html_output off. Then Motion answers back with very basic text 
only and no html around it. 
<p></p>
To remote control Motion from a web pages you can for example use PHP. 
In PHP it takes this simple code line to send a remote commend to Motion. 
Here we pause motion detection for camera 2
<p></p>
<code>readfile('http://localhost:8080/2/detection/pause');</code>
<p></p>

</p>
<strong>ALERT!</strong> Security Warning! This feature also means you have to pay attention 
to the following. 
<ul>
  <li> Anyone with access to the remote control port (http) can alter the values of any options 
  and save files anywhere on your server with the same privileges as the user running Motion. 
  They can execute any command on your computer with the same privileges as the user running Motion. 
  Anyone can access your control port if you have not either limited access to localhost or limited 
  access using firewalls in the server. You should always have a router between a machine running 
  Motion with remote control enabled and the Internet and make sure the Motion control port is not 
  accessible from the outside.</li>
  <li> If you limit control port to localhost you still need to take care of any user logging 
    into the server with any kind of terminal session.</li>
  <li> Run Motion as a harmless user. DO NOT RUN AS ROOT!!</li>
</ul>

<p></p>
<p></p>

<h3><a name="ipv6_enabled"></a> ipv6_enabled </h3>
<p></p> 
<ul>
  <li> Type: String</li>
  <li> Range / Valid values: Max 4095 characters</li>
  <li> Default: </li>
</ul> 
<p></p>
# Enable or disable IPV6 for http control and stream (default: off )
<p></p>

<h3><a name="stream_port"></a> stream_port </h3>
<p></p> 
<ul>
  <li> Type: Integer</li>
  <li> Range / Valid values: 0 - 65535</li>
  <li> Default: 0 (disabled)</li>
</ul> 
<p></p>
# The mini-http server listens to this port for requests (default: 0 = disabled)
TCP port on which motion will listen for incoming connects with its webcam server.
Note that each camera thread must have its own unique port number and it must also be different from the control_port number.
A good value to select is 8081 for camera 1, 8082 for camera 2, 8083 for camera 3 etc etc.

This must be placed in motion.conf and not in a thread config file.

<p></p>

<h3><a name="stream_quality"></a> stream_quality </h3>
<p></p> 
<ul>
  <li> Type: Integer</li>
  <li> Range / Valid values: 1 - 100</li>
  <li> Default: 50</li>
</ul> 
<p></p>
Quality setting in percent for the mjpeg picture frames transferred over the webcam connection. Keep it low to restrict needed bandwidth.
The mjpeg stream consists of a header followed by jpeg frames separated by content-length and boundary string. The quality level defines the size of the individual jpeg pictures in the mjpeg stream. If you set it too high you need quite a high bandwidth to view the stream.

<p></p>

<h3><a name="stream_motion"></a> stream_motion </h3>
<p></p> 
<ul>
  <li> Type: Boolean</li>
  <li> Range / Valid values: on, off</li>
  <li> Default: off</li>
</ul> 
<p></p>
When set to 'on' slow down the stream to 1 picture per second when no motion is detected. 
When motion is detected the stream runs as defined by <a name="stream_maxrate"></a> stream_maxrate  
When 'off' the stream always runs as defined by <a name="stream_maxrate"></a> stream_maxrate.
Use this option to save bandwidth when there is not anything important to see from the camera anyway.
<p></p>

<h3><a name="stream_maxrate"></a> stream_maxrate </h3>
<p></p> 
<ul>
  <li> Type: Integer</li>
  <li> Range / Valid values: 1 - 100</li>
  <li> Default: 1</li>
</ul> 
<p></p>
Limit the framerate of the stream in frames per second. Set the value to 100 for practically unlimited.
Don't set this parameter too high unless you only use it on the localhost or on an internal LAN.
<p></p>

<h3><a name="stream_localhost"></a> stream_localhost </h3>
<p></p> 
<ul>
  <li> Type: Boolean</li>
  <li> Range / Valid values: on, off</li>
  <li> Default: on</li>
</ul> 
<p></p>
Limits the access to the stream to the localhost.
By setting this to on, the stream can only be accessed on the same machine on which Motion is running.
<p></p>

<h3><a name="stream_limit"></a> stream_limit </h3>
<p></p> 
<ul>
  <li> Type: String</li>
  <li> Range / Valid values: Max 4095 characters</li>
  <li> Default: </li>
</ul> 
<p></p>
This parameter limits the maximum number of images per connection and is 
determined by multiplying actual stream rate by desired number of seconds
<p></p>

<h3><a name="stream_auth_method"></a> stream_auth_method </h3>
<p></p> 
<ul>
  <li> Type: Integer</li>
  <li> Range / Valid values: 0 to 2</li>
  <li> Default: 0</li>
</ul> 
<p></p>
This parameter establishes desired authentication method for the stream and 
web control ports.  The parameters have the following meaning.
<ul>
<li>0 = disabled  </li>
<li>1 = Basic authentication </li>
<li>2 = MD5 digest (the safer authentication)  </li> 
</ul>
<p></p>
Note that if you are enabling the webcontrol feature of Motion, you really really really ... should 
enable security authentications.  No. Seriously.  You really should.  See the security warnings in this
document regarding how it completely opens up your system.
<p></p>


<h3><a name="stream_authentication"></a> stream_authentication </h3>
<p></p> 
<ul>
  <li> Type: String</li>
  <li> Range / Valid values: Max 4095 characters</li>
  <li> Default: Not Defined</li>
</ul> 
<p></p>
This parameter establishes the username and password to use for the stream.  
The syntax is username:password
<p></p>

<h3><a name="stream_preview_scale"></a> stream_preview_scale </h3>
<p></p> 
<ul>
  <li> Type: Integer</li>
  <li> Range / Valid values:</li>
  <li> Default: 25</li>
</ul> 
<p></p>
If the webcontrol page has HTML enabled, Motion displays all of the streams on the home webcontrol page in HTML 
format so that all the images can be viewed by standard browsers.
<p></p>
This parameter indicates the percentage to scale the stream image when it is placed on the page.  
Numbers greater than 100 are permitted. 
<p></p>
<p></p>

<h3><a name="stream_preview_newline"></a> stream_preview_newline </h3>
<p></p> 
<ul>
  <li> Type: string</li>
  <li> Range / Valid values:on / off</li>
  <li> Default: on</li>
</ul> 
<p></p>
If the webcontrol page has HTML enabled, Motion displays all of the streams on the home webcontrol page 
in HTML format so that all the images can be viewed by standard browsers.
<p></p>
This parameter determines whether the image is placed on a new line in the webcontrol web page.
<p></p>  
Preview images are placed on to the webcontrol home page in thread number order.  This   
This parameter allows the user some flexibility in organizing the images on the page.  
<p></p>
Setting this parameter to off will set the image to the right of any image from a lower numbered thread. 
Setting it to 'on' will place the image on the start of the next line(below). 
<p></p>
Full customization of the webcontrol page is NOT planned in the Motion development.  Users that require
a more polished and customized preview page are encouraged to create their own local HTML page that references
the streams.    
<p></p>

<h3><a name="webcontrol_port"></a> webcontrol_port </h3>
<p></p> 
<ul>
  <li> Type: Integer</li>
  <li> Range / Valid values: 0 - 65535</li>
  <li> Default: 0 (disabled)</li>
</ul> 
<p></p>
Sets the port number for the http based control of the Motion parameters.  
This option must be placed in the motion.conf file and not in a thread config file.
Port numbers below 1024 normally require that you have root privileges. 
The port 8080 is the typical selection of the port for this purpose. 
<p></p>

<h3><a name="webcontrol_localhost"></a> webcontrol_localhost </h3>
<p></p> 
<ul>
  <li> Type: Boolean</li>
  <li> Range / Valid values: on, off</li>
  <li> Default: on</li>
</ul> 
<p></p>
This option restricts the control of the Motion parameters to the localhost. 
This option must be placed in motion.conf and not in a thread config file.
By setting this to on, the control using http (browser) can only be accessed on the 
same machine on which Motion is running.
<p></p>

<h3><a name="webcontrol_html_output"></a> webcontrol_html_output </h3>
<p></p> 
<ul>
  <li> Type: Boolean</li>
  <li> Range / Valid values: on, off</li>
  <li> Default: on</li>
</ul> 
<p></p>
Enable HTML in the answer sent back to a browser connecting to the webcontrol_port. 
This option must be placed in motion.conf and not in a thread config file.
The recommended value for most is "on" which means that you can navigate and control 
Motion with a normal browser. By setting this option to "off" the replies are in plain 
text which may be easier to parse for 3rd party programs that control Motion.
<p></p>

<h3><a name="webcontrol_authentication"></a> webcontrol_authentication </h3>
<p></p> 
<ul>
  <li> Type: String</li>
  <li> Range / Valid values: Max 4095 characters</li>
  <li> Default: </li>
</ul> 
<p></p>
This parameter establishes the username and password to use for the stream.  
The syntax is username:password
<p></p>
<p></p>
</ul>

<h2><a name="Options_Database"></a><strong>Database</strong></h2>
<ul>

Motion can be compiled with MySQL, PostgreSQL or SQLite3 database support. 
When enabled Motion can be configured to add a record to a table in the database 
as specified by the sql_query. The query can contain the fields that are used and the 
value are given by using conversion specifiers for dynamic data like 
filename, time, number of detected pixels etc. 
Motion does not place any binary images in the database and it cannot remove old records.
<p></p>
Motion only adds records to the database when files are created. 
The database contains records of saved files which means to get a 
record in the database the feature that enables for example motion 
detection, timelapse, snapshots etc must be enabled. 
The sql_log options defines which types of files are logged in the database.
<p></p>
The following are sample create table queries for different databases.
<p></p> 
Mysql : CREATE TABLE security (camera int, filename char(80) not null, frame int, file_type int, time_stamp timestamp(14), event_time_stamp timestamp(14));
<p></p>
Postgresql : CREATE TABLE security (camera int, filename char(80) not null, frame int, file_type int, time_stamp timestamp without time zone, event_time_stamp timestamp without time zone);
<p></p>


<p></p>
<h3><a name="sql_log_picture"></a> sql_log_picture </h3>
<p></p> 
<ul>
  <li> Type: Boolean</li>
  <li> Range / Valid values: on, off</li>
  <li> Default: on</li>
</ul> 
<p></p>
Log to the database when a motion triggered image file is created.
<p></p>

<h3><a name="sql_log_snapshot"></a> sql_log_snapshot </h3>
<p></p> 
<ul>
  <li> Type: Boolean</li>
  <li> Range / Valid values: on, off</li>
  <li> Default: on</li>
</ul> 
<p></p>
Log to the database when creating a snapshot image file.
<p></p>

<h3><a name="sql_log_movie"></a> sql_log_movie </h3>
<p></p> 
<ul>
  <li> Type: Boolean</li>
  <li> Range / Valid values: on, off</li>
  <li> Default: off</li>
</ul> 
<p></p>
Log to the database when creating motion triggered movie file.
<p></p>

<h3><a name="sql_log_timelapse"></a> sql_log_timelapse </h3>
<p></p> 
<ul>
  <li> Type: Boolean</li>
  <li> Range / Valid values: on, off</li>
  <li> Default: off</li>
</ul> 
<p></p>
Log to the database when creating timelapse movie file
<p></p>

<h3><a name="sql_query"></a> sql_query </h3>
<p></p> 
<ul>
  <li> Type: String</li>
  <li> Range / Valid values: Max 4095 characters</li>
  <li> Default: Not Defined</li>
</ul> 
<p></p>
SQL query string that is sent to the database when the sql_log_* item is triggered. 
<p></p>
<p></p>
You can use <a href="#conversion_specifiers">Conversion Specifiers</a> 
within the query.  
<p></p>
<p></p>
Sample Query
<p></p>
insert into security(camera, filename, frame, file_type, time_stamp, text_event) values('%t', '%f', '%q', '%n', '%Y-%m-%d %T', '%C')
insert or ignore into images (camera_nbr, file_name, year, month, day, hour, minute) values (8, '%f', '%Y','%m','%d','%H','%M')
<p></p>
<p></p>

<h3><a name="database_type"></a> database_type </h3>
<p></p> 
<ul>
  <li> Type: String</li>
  <li> Range / Valid values: mysql, postgresql, sqlite3</li>
  <li> Default: Not Defined</li>
</ul> 
<p></p>
This option specifies the database type.  
<p></p>

<h3><a name="database_dbname"></a> database_dbname </h3>
<p></p> 
<ul>
  <li> Type: String</li>
  <li> Range / Valid values: Max 4095 characters</li>
  <li> Default: Not Defined</li>
</ul> 
<p></p>
The name of the database.  For Sqlite3, the full path and name to the database. 
<p></p>

<h3><a name="database_host"></a> database_host </h3>
<p></p> 
<ul>
  <li> Type: String</li>
  <li> Range / Valid values: Max 4095 characters</li>
  <li> Default: localhost</li>
</ul> 
<p></p>
The host on which the database is located
<p></p>

<h3><a name="database_user"></a> database_user </h3>
<p></p> 
<ul>
  <li> Type: String</li>
  <li> Range / Valid values: Max 4095 characters</li>
  <li> Default: </li>
</ul> 
<p></p>
The user account name for database
<p></p>

<h3><a name="database_password"></a> database_password </h3>
<p></p> 
<ul>
  <li> Type: String</li>
  <li> Range / Valid values: Max 4095 characters</li>
  <li> Default: </li>
</ul> 
<p></p>
The user password for database
<p></p>

<h3><a name="database_port"></a> database_port </h3>
<p></p> 
<ul>
  <li> Type: Integer</li>
  <li> Range / Valid values: </li>
  <li> Default: </li>
</ul> 
<p></p>
The port number that is used for the database.  Typical values are: mysql=3306 and postgresql=5432
<p></p>


<h3><a name="database_busy_timeout"></a> database_busy_timeout </h3>
<p></p> 
<ul>
  <li> Type: Integer</li>
  <li> Range / Valid values: </li>
  <li> Default: 0</li>
</ul> 
<p></p>
If the database is busy when the request is issued, this parameter indicates the time to 
wait before issuing a timeout message.
<p></p>
<p></p>

</ul>

<h2><a name="Options_Tracking"></a><strong>Tracking</strong></h2>
<ul>

<p></p>
This is still at the experimental stage. 
<p></p>
Motion can move the camera to a fixed position given in degrees pan (left-right) and tilt (down-up). 
Movement can be set with absolute coordinates or relative to current position. There is also an auto tracking 
feature for the Logitech Quickcam Sphere/Orbit but it is not very mature. Search the Motion home website 
or community development pages for additional information regarding tracking if these features are required.
<p></p>
<p></p>


<p></p>
<h3><a name="track_type"></a> track_type </h3>
<p></p> 
<ul>
  <li> Type: Discrete Strings</li>
  <li> Range / Valid values: 0 (none), 1 (stepper), 2 (iomojo), 3 (pwc), 4 (generic), 5 (uvcvideo)</li>
  <li> Default: 0 (None)</li>
</ul> 
<p></p>
Type of tracker.
<p></p>
Motion has special tracking options which use either a serial stepper motor controller, 
an iomojo smile cam or a Philips WebCam driver compatible pan/tilt camera such as 
the Logitech Quickcam Sphere or Orbit.
<p></p>
To disable tracking, set this to 0 and the other track options are ignored.
<p></p>
Value 1 is for the special Motion Tracking project using a stepper motor and a home made controller.
<p></p>
Value 2 is for the iomojo smilecam
<p></p>
Value 3 is for pwc type USB tracking cameras such as the Logitech Quickcam Sphere/Orbit which is driven 
by the pwc (Philips WebCam) driver. To use this camera your version of pwc must be at least 8.12.
<p></p>
Value 4 is the generic track type. Currently it has no other function than enabling some of the 
internal Motion features related to tracking. 
<p></p>
Value 5 is for uvcvideo type USB tracking cameras such as the Logitech Quickcam Sphere/Orbit MP which is driven 
by the uvcvideo driver. 
<p></p>

<p></p>

<h3><a name="track_auto"></a> track_auto </h3>
<p></p> 
<ul>
  <li> Type: Boolean</li>
  <li> Range / Valid values: on, off</li>
  <li> Default: off</li>
</ul> 
<p></p>
Enable auto tracking
Requires a tracking camera type supported by Motion.
<p></p>

<h3><a name="track_port"></a> track_port </h3>
<p></p> 
<ul>
  <li> Type: String</li>
  <li> Range / Valid values: Max 4095 characters</li>
  <li> Default: </li>
</ul> 
<p></p>
This is the device name of the serial port to which the stepper motor interface is connected.
Only used for stepper motor tracking.
<p></p>

<h3><a name="track_motorx"></a> track_motorx </h3>
<p></p> 
<ul>
  <li> Type: Integer</li>
  <li> Range / Valid values: 0 - 2147483647</li>
  <li> Default: 0</li>
</ul> 
<p></p>
The motor number that is used for controlling the x-axis.
Only used for stepper motor tracking.
<p></p>

<h3><a name="track_motorx_reverse"></a> track_motorx_reverse </h3>
<p></p> 
<ul>
  <li> Type: Integer</li>
  <li> Range / Valid values: 0 - 2147483647</li>
  <li> Default: 0</li>
</ul> 
<p></p>
Description
<p></p>

<h3><a name="track_motory"></a> track_motory </h3>
<p></p> 
<ul>
  <li> Type: Integer</li>
  <li> Range / Valid values: 0 - 2147483647</li>
  <li> Default: 0</li>
</ul> 
<p></p>
The motor number that is used for controlling the y-axis.
Only used for stepper motor tracking.
<p></p>

<h3><a name="track_motory_reverse"></a> track_motory_reverse </h3>
<p></p> 
<ul>
  <li> Type: Integer</li>
  <li> Range / Valid values: 0 - 2147483647</li>
  <li> Default: 0</li>
</ul> 
<p></p>

<p></p>

<h3><a name="track_maxx"></a> track_maxx </h3>
<p></p> 
<ul>
  <li> Type: Integer</li>
  <li> Range / Valid values: 0 - 2147483647</li>
  <li> Default: 0</li>
</ul> 
<p></p>
The maximum position for servo x.
Only used for stepper motor tracking.
<p></p>

<h3><a name="track_minx"></a> track_minx </h3>
<p></p> 
<ul>
  <li> Type: Integer</li>
  <li> Range / Valid values: 0 - 2147483647</li>
  <li> Default: 0</li>
</ul> 
<p></p>

<p></p>

<h3><a name="track_maxy"></a> track_maxy </h3>
<p></p> 
<ul>
  <li> Type: Integer</li>
  <li> Range / Valid values: 0 - 2147483647</li>
  <li> Default: 0</li>
</ul> 
<p></p>
The maximum position for servo y.
Only used for stepper motor tracking.
<p></p>

<h3><a name="track_miny"></a> track_miny </h3>
<p></p> 
<ul>
  <li> Type: Integer</li>
  <li> Range / Valid values: 0 - 2147483647</li>
  <li> Default: 0</li>
</ul> 
<p></p>

<p></p>

<h3><a name="track_homex"></a> track_homex </h3>
<p></p> 
<ul>
  <li> Type: Integer</li>
  <li> Range / Valid values: 0 - 2147483647</li>
  <li> Default: 0</li>
</ul> 
<p></p>

<p></p>

<h3><a name="track_homey"></a> track_homey </h3>
<p></p> 
<ul>
  <li> Type: Integer</li>
  <li> Range / Valid values: 0 - 2147483647</li>
  <li> Default: 0</li>
</ul> 
<p></p>

<p></p>

<h3><a name="track_iomojo_id"></a> track_iomojo_id </h3>
<p></p> 
<ul>
  <li> Type: Integer</li>
  <li> Range / Valid values: 0 - 2147483647</li>
  <li> Default: 0</li>
</ul> 
<p></p>
Use this option if you have an iomojo smilecam connected to the serial port instead 
of a general stepper motor controller.
Only used for iomojo camera.
<p></p>

<h3><a name="track_step_angle_x"></a> track_step_angle_x </h3>
<p></p> 
<ul>
  <li> Type: Integer</li>
  <li> Range / Valid values: 0 - 2147483647</li>
  <li> Default: 0</li>
</ul> 
<p></p>
Angle in degrees the camera moves per step on the X-axis with auto tracking. Currently only used with pwc type cameras.
Requires a tracking camera type pwc.

<p></p>

<h3><a name="track_step_angle_y"></a> track_step_angle_y </h3>
<p></p> 
<ul>
  <li> Type: Integer</li>
  <li> Range / Valid values: 0 - 2147483647</li>
  <li> Default: 0</li>
</ul> 
<p></p>
Angle in degrees the camera moves per step on the Y-axis with auto tracking. Currently only used with pwc type cameras.
Requires a tracking camera type pwc.
<p></p>
<p></p>

<h3><a name="track_move_wait"></a> track_move_wait </h3>
<p></p> 
<ul>
  <li> Type: Integer</li>
  <li> Range / Valid values: 0 - 2147483647</li>
  <li> Default: 0</li>
</ul> 
<p></p>
Delay during which tracking is disabled after auto tracking has moved the camera. 
Delay is defined as number of picture frames.
The actual delay is depending on the chosen framerate. 
If you want the camera to move maximum once every 2 seconds and the framerate is 10 then you 
need to set the track_move_wait value to 2 * 10 = 20.
<p></p>

<h3><a name="track_speed"></a> track_speed </h3>
<p></p> 
<ul>
  <li> Type: Integer</li>
  <li> Range / Valid values: 0 - 2147483647</li>
  <li> Default: 0</li>
</ul> 
<p></p>
Speed to set the motor to.
Only used for stepper motor tracking.

<p></p>

<h3><a name="track_stepsize"></a> track_stepsize </h3>
<p></p> 
<ul>
  <li> Type: Integer</li>
  <li> Range / Valid values: 0 - 2147483647</li>
  <li> Default: 0</li>
</ul> 
<p></p>
Number of steps to make.
Only used for stepper motor tracking.
<p></p>
</ul>

</ul>
